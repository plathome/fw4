.. _pd_repeater_mqtt:

MQTTサーバー(mqtt)
---------------------------------

■ 送受信設定メニューにおける設定

.. figure:: mqtt.png
  :scale: 100%

.. list-table:: 送受信設定メニューにおける設定項目
    :widths: 30 70
    :header-rows: 1
    
    * - 設定項目
      - 説明
    * - インターバル[sec]
      - 送信完了後～送信開始までの時間間隔を秒単位で設定します。
    * - 有効時間[sec]
      - PD Reperterがデータ送信できない場合において、保持する時間を設定します。　
        0 を指定した場合、データ送信が完了するまで保持し続けます。
    * - サブプロセス再起動間隔[sec]
      - サブプロセスを再起動する間隔を設定します。　
        通常デォルト値（86400秒）から変更する必要はありません。　
        0を指定した場合、再起動は行いません。
    * - 送信先ホスト
      - 接続先の汎用MQTTサーバーのホスト名を設定します。
    * - クライアントID
      - 汎用MQTTサーバーに接続するためのクライアントIDを設定します。
    * - トピックプレフィックス
      - 汎用MQTTサーバーへデータを送る際に用いるMQTTプロトコルのトピックのプレフィックスを設定します。　
        サフィックスは’/’に続きユニークIDが設定されます。
    * - 受信トピックプレフィックス
      - 汎用MQTTサーバーから制御メッセージを待ち受けるために用いる
        MQTTプロトコルのトピックのプレフィックスを設定します。　
        サフィックスは’/’に続きユニークIDが設定されます。
    * - プロトコル
      - 接続に用いるプロトコル(TCP/SSL)を選択します。
    * - ポート番号
      - 送信先ホストのポート番号を設定します。
    * - QoS
      - 汎用MQTTサーバーへデータを送信する際のMQTTプロトコルのQoSを設定します。
    * - 受信QoS
      - 汎用MQTTサーバーから制御メッセージを受信する際のMQTTプロトコルのQoSを設定します。
    * - ユーザー名
      - 汎用MQTTサーバーへの接続に用いるユーザー名を設定します。
    * - パスワード
      - 汎用MQTTサーバーへの接続に用いるパスワードを設定します。
    * - トラストストア
      - 汎用MQTTサーバーへ接続する際のルート証明書ファイルのパス名を設定します。
    * - キーストア
      - 汎用MQTTサーバーへ接続する際のクライアント証明書ファイルのパス名を設定します。
    * - プライベートキー
      - 汎用MQTTサーバーへ接続する際のプライベートキーファイルのパス名を設定します。
    * - 詳細設定
      - MQTTプロトコルの詳細値を設定します。
    * - キープアライブ間隔[sec]
      - MQTTプロトコルのキープアライブインターバルを設定します。
    * - クリーンセッション
      - MQTTプロトコルのクリーンセッションの使用／不使用を選択します。
    * - Retain機能
      - MQTTプロトコルのRetain機能の使用／不使用を選択します。
    * - WILL機能
      - MQTTプロトコルのLWT(LastWill and Testament)機能の使用／不使用を選択します。
    * - WILL QoS機能
      - MQTTプロトコルがWILLメッセージを送出する際のQoSを設定します。
    * - WILL Retain機能
      - MQTTプロトコルのWILL Retain機能の使用／不使用を選択します。
    * - WELLトピックサフィックス
      - MQTTのWILLトピックのサフックスを設定します。　
        WILLトピックのプレフックス部には、トピックプレフィックスに設定された文字列が用いられます。
    * - WLLメッセージ
      - MQTTプロトコルのWILLメッセージを設定します。
    * - デバイス一括設定
      - 各デバイス設定メニューにおいて送信対象設定が「送信する」となっている各対象の送信先設定を一括で有効/無効を選択できます。

■ 各デバイス設定メニューにおける設定

.. figure:: mqtt_device.png
  :scale: 100%

.. list-table:: 各デバイス設定メニューにおける設定項目
    :widths: 30 70
    :header-rows: 1
    
    * - 設定項目
      - 説明
    * - ユニークID(mqtt)
      - 汎用MQTTサーバーへデータを送る際、
        もしくは制御メッセージを受け取る際のMQTTプロトコルのトピックのサフィックスに用いる
        各デバイス毎にユニークな文字列を設定します。 
        ’.’ （ASCIIコード  0x2e）は ’/’ (ASCIIコード0x2f)に変換して扱われます。

.. note::
  * トラストストア・キーストア・プライベートキーはWEB UIの「システム」→「ファイル管理」タブにてアップロードしてください。
   
.. raw:: latex

   \clearpage
