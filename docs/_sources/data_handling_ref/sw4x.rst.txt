.. _data_handler_reference_sw4x:

***********************
PD Handler SW4x
***********************

| PD Handler SW4x は、セイコーインスツル社製 SW4000 シリーズ無線センサーネットワークにおいて、同シリーズのシリアル接続型ベースデバイスを介し、設定ファイル pd_handler_sw4x.conf とモデリングファイル pd_handler_sw4x_model.conf、RTU モデリングファイル pd_handler_sw4x_rtu.conf、並びに Modbus 用モデリングファイル pd_handler_modbus_2_model.conf の設定に基づき、同ネットワークに接続されるセンサーノードもしくはモニターノードより送信されるデータをハンドリングします。
| また、PD Repeater を介しクラウドから送られる JSON 文字列によるセンサーノードもしくはモニターノードに対する制御も可能です。

=========================
対応ノード一覧
=========================

PD Handler SW4x がサポートするノードの一覧を示します。

.. table:: PD Handler SW4x がサポートするノードの一覧

    +--------------------------+--------------+-----------+--------------------------------+
    | 名称                     | 型番         | Unit Type | 機能                           |
    +==========================+==============+===========+================================+
    | 温度ノード               | SW-42P0-1x01 | 0x00      | 温度のモニター                 |
    +--------------------------+--------------+-----------+--------------------------------+
    | 温・湿度ノード           | SW-4210-1202 | 0x01      | 温度・湿度のモニター           |
    +--------------------------+--------------+-----------+--------------------------------+
    | 照度ノード               | SW-4210-1205 | 0x02      | 照度のモニター                 |
    +--------------------------+--------------+-----------+--------------------------------+
    | 温・湿度・照度ノード     | SW-4210-1204 | 0x03      | 温度・湿度・照度のモニター     |
    +--------------------------+--------------+-----------+--------------------------------+
    | 人感ノード(活動量)       | SW-4220-1000 | 0x09      | 人の活動量をモニター           |
    +--------------------------+--------------+-----------+--------------------------------+
    | パルスカウントノード     | SW-4240-1000 | 0x0A      | 入力パルスの積算カウント       |
    +--------------------------+--------------+-----------+--------------------------------+
    | 人感ノード (人感)        | SW-4220-1010 | 0x0B      | 人を検出時に送信               |
    +--------------------------+--------------+-----------+--------------------------------+
    | リモコン温・湿度ノード   | SW-42J0-1202 | 0x0D      | 温度・湿度のモニターと         |
    +                          +              +           +                                +
    |                          |              |           | 赤外線リモコン信号の発信       |
    +--------------------------+--------------+-----------+--------------------------------+
    | パルスピックノード       | SW-42K0-1000 | 0x0F      | 入力パルスの積算カウント       |
    +--------------------------+--------------+-----------+--------------------------------+
    | 電流センサーノード(5A)   | SW-42DD-1000 | 0x10      | 電流・電力・積算電力のモニター |
    +--------------------------+--------------+-----------+                                +
    | 電流センサーノード(200A) | SW-42DD-1100 | 0x11      |                                |	
    +--------------------------+--------------+-----------+                                +
    | 電流センサーノード       | SW-42D0-1000 | 0x12      |                                |	
    +--------------------------+--------------+-----------+--------------------------------+
    | CO2ノード                | SW-4230-1000 | 0x20      | 二酸化炭素濃度のモニター       |
    +--------------------------+--------------+-----------+--------------------------------+
    | 電力モニターノード       | SW-4260-1110 | 0x21      | オムロン社製 KM20-B40-FLK、    |
    +                          +              +           +                                +
    |                          |              |           | KM50-C・Eシリーズのデータ送信  |
    +--------------------------+--------------+-----------+--------------------------------+
    | Modbus RTU ノード        | SW-4280-1000 | 0x23      | Modbus RTU 機器の制御          |
    +--------------------------+--------------+-----------+--------------------------------+
    | 電力モニターノード       | SW-4260-1120 | 0x28      | オムロン社製 KM-N1-FLKシリーズ |
    +                          +              +           +                                +  
    |                          |              |           | のデータ送信                   |
    +--------------------------+--------------+-----------+--------------------------------+
    | バイタルセンサーノード   | SW-42L0-4000 | 0xA0      | 脈拍・体温のモニター           |
    +--------------------------+--------------+-----------+--------------------------------+

.. raw:: latex

   \clearpage

================
デォルトパス
================

PD Handler SW4x に関連するファイルのデォルトパスは次の通りです。

.. list-table:: PD Handler SW4x に関連するファイルのデォルトパス
    :header-rows: 1

    * - パス名
      - 説明
    * - /usr/sbin/pd_handler_sw4x
      - 常駐実行オブジェクト（デーモン）
    * - /usr/sbin/pd_handler_sw4x_cli
      - コマンドラインインタフェース
    * - /etc/init.d/pd_handler_sw4x
      - RCファイル
    * - /lib/systemd/system/pd_handler_sw4x.service
      - Systemd Serviceファイル
    * - /var/webui/config/pd_handler_sw4x.conf
      - 設定ファイル
    * - /var/webui/config/pd_handler_sw4x_model.conf
      - モデリングファイル
    * - /var/webui/config/pd_handler_sw4x_rtu.conf
      - RTUモデリングファイル
    * - /var/webui/config/pd_handler_modbus_2_model.conf
      - Modbusモデリングファイル
    * - /var/webui/config/pd_handler_modbus_2_model.conf.default
      - Modbusモデリングファイル(デフォルト)
    * - /var/run/pd_handler_sw4x.pid
      - PIDファイル

| PD Handler SW4xのモデリングは実行オブジェクトにハードコーディングされているため、モデリングファイルは、出力メッセージの書式を変更する場合にのみ必要となります。
| 変更する場合は /usr/share/pdhms/sw4x/pd_handler_sw4x_model.conf.default を/var/webui/config/pd_handler_sw4x_model.conf へコピーし、値のみを編集して下さい。
| 配列の要素数とその順列が変更された場合の動作は保証されません。

.. raw:: latex

   \clearpage

=============================
モデリングファイルの書式
=============================

構文
========

.. literalinclude:: pd_handler_sw4x_model.conf

モデルキー
===============

モデルキーの一覧を示します。

.. list-table:: モデルキーの一覧
    :header-rows: 1

    * - キー
      - 名称
      - 型番
    * - SW4X_COMMON
      - モデルに依存しない共通項の設定用
      - 
    * - SW42P0_1x01
      - 温度ノード
      - SW-42P0-1x01
    * - SW4210_1202
      - 温・湿度ノード
      - SW-4210-1202
    * - SW4210_1205
      - 照度ノード
      - SW-4210-1205
    * - SW4210_1204
      - 温・湿度・照度ノード
      - SW-4210-1204
    * - SW4220_1000
      - 人感ノード(活動量)
      - SW-4220-1000
    * - SW4240_1000
      - パルスカウントノード
      - SW-4240-1000
    * - SW4220_1020
      - 人感ノード (人感)
      - SW-4220-1010
    * - SW42J0_1202
      - リモコン温・湿度ノード
      - SW-42J0-1202
    * - SW42K0_1000
      - パルスピックノード
      - SW-42K0-1000
    * - SW42DD_1000
      - 電流センサーノード(5A)
      - SW-42DD-1000
    * - SW42DD_1100
      - 電流センサーノード(200A)
      - SW-42DD-1100
    * - SW42D0_1000
      - 電流センサーノード
      - SW-42D0-1000
    * - SW4230_1000
      - CO2ノード
      - SW-4230-1000
    * - SW4260_1x10
      - 電力モニターノード
      - SW-4260-1110
    * - SW4280_1000
      - Modbus RTU ノード
      - SW-4280-1000
    * - SW4260_1x20
      - 電力モニターノード
      - SW-4260-1120
    * - SW42L0_4000
      - バイタルセンサーノード
      - SW-42L0-4000
    * - SW4100_1000
      - ルーターノード
      - SW-4100-1000
    * - SB4020_1000
      - OpenBlocksシリーズ アドオンモジュール
      - SB-4020-1000
    * - SW4000_1000
      - USBベース
      - SW-4000-1000
    * - SW4300_1000
      - Ethernet ベース
      - SW-4300-1000
    * - SW4500_1000
      - RS-232 ベース
      - SW-4500-1000

.. raw:: latex

   \clearpage

モデルオブジェクト
======================

モデルオブジェクトは、次のオブジェクトから構成されています。　
但し、enable, nodeInfos, predictio, inits, polls の各キーはモデルによって存在しない場合があります。

.. list-table:: モデルオブジェクト
    :widths: 20 12 68
    :header-rows: 1
    
    * - キー
      - データ型
      - 説明
    * - enable
      - 論理型
      - モデルのデータをハンドリングするか否か. デフォルト値は true.
    * - refuse_empty
      - 論理型
      - include されているデータが存在しない場合、unitType や timestamp 等の共通項の送信を行わない. デフォルト値は false.
    * - keys
      - JSON配列
      - モデルの持つデーターモデルの並び.
    * - infos
      - JSON obj
      - 出力に付加されるモデルのユーザー定義オブジェクト.
    * - precision
      - 整数値
      - JSON文字列にダンプされる際のリアル型データの精度(libjanssonに与えるパラメータ).
    * - nodeInfos
      - JSON obj
      - 接続されているノード(RID)の一覧.
    * - inits
      - JSON配列
      - PD Handler SW4x 起動時にノードに与えられる動作パラメータ設定コマンドの並び.
    * - polls
      - JSON配列
      - 定期データ取得用オブジェクトの並び.

.. raw:: latex

   \clearpage

keys オブジェクト
======================

| keys オブジェクトの数(配列の要素数)と設定可能なキーはモデルと配列の要素のデータの型等によって異なります。
| 配列の要素とその順列は、モデル毎に固定されているため、値を変更する場合は /usr/share/pdhms/sw4x/pd_handler_sw4x_model.conf.default を/var/webui/config/pd_handler_sw4x_model.conf へコピーし、値のみを編集して下さい。配列の要素数とその順列が変更された場合の動作は保証されません。

.. list-table:: keys オブジェクト
    :widths: 20 12 68
    :header-rows: 1
    
    * - キー
      - データ型
      - 説明
    * - key
      - 文字列
      - キーの文字列 (32byte).
    * - include
      - 論理型
      - このキーを出力に含めるか否か.
    * - form
      - 文字列
      - 値のフォーマットとして 'bool'(論理表記 true/false),'dec'(10進数),'HEX'(16進数大文字),'hex'(16進数小文字)のいずれかを指定する.
    * - ratio
      - 整数値
      - 値の係数に用いる10を低とする冪乗値の冪指数を指定する. デフォルト値は 0

nodeInfos オブジェクト
==========================

| nodeInfos オブジェクトは、接続されているノードど一覧を示す付加情報であり、SW4X_COMMON オブジェクトにのみ記載されます。
| nodeInfos を出力に含めるか否かは、keys オブジェクト配列の18番目の要素に指定します。

.. list-table:: nodeInfos オブジェクト
    :widths: 20 12 68
    :header-rows: 1
    
    * - キー
      - データ型
      - 説明
    * - ridNNN
      - 文字列
      - RID 'NNN' に接続されるノードを示す任意の文字列 (64byte).

.. raw:: latex

   \clearpage

.. _data_handler_reference_sw4x_inits_obj:

inits オブジェクト
======================

inits オブジェクトは、SW-4230-1000 CO2 ノードのように動作パラメータを設定できる
ノードに対し、PD Handler SW4x 起動時にノードへ送信する設定コマンドを指定するためのオブジェクトです。

.. list-table:: inits オブジェクト
    :widths: 20 12 68
    :header-rows: 1
    
    * - キー
      - データ型
      - 説明
    * - enable
      - 論理型
      - この初期化処理を行うか否か.
    * - rid
      - 整数又は文字列
      - 対象ノードの RIDを '0xNN' 形式の16進数もしくは整数で指定する.
    * - cmd
      - 文字列
      - '0x' から始まる 26 文字のコマンド文字列コマンド文字列.
    * - description
      - 文字列
      - モデリングファイル上のコメント.

.. raw:: latex

   \clearpage

pollsオブジェクト
======================

| polls オブジェクトは、SW-4230-1000 CO2 ノードのように任意にデータを読み出せるノードに対する、ポーリング処理の諸元を指定します。
| SW-4280-1000 Modbus RTU ノード用とその他のモデル用(汎用)で、指定可能なオブジェクトが異ります。

汎用 
-------------------

.. list-table:: 汎用 pools オブジェクト
    :widths: 20 12 68
    :header-rows: 1
    
    * - キー
      - データ型
      - 説明
    * - enable
      - 論理型
      - このポーリング処理を行うか否か.
    * - rid
      - 整数又は文字列
      - 対象ノードの RIDを '0xNN' 形式の16進数もしくは整数で指定する.
    * - cmd
      - 文字列
      - '0x' から始まる 26 文字のコマンド文字列コマンド文字列.
    * - interva
      - 整数値
      - データを取得する間隔(sec). デフォルト値は 60.
    * - time_sync
      - 論理値
      - 基準時刻制御モード. デフォルト値は false.
    * - base_time
      - 文字列
      - 基準時刻制御モードの基準時刻を 'HH:MM' 形式で指定する. デフォルト値は '00:00'.
    * - description
      - 文字列
      - モデリングファイル上のコメント.

.. _data_handler_reference_sw4x_sw4280_polls_obj:

SW-4280-1000 Modbus RTUノード用
-----------------------------------

.. list-table:: SW-4280-1000 Modbus RTU ノード用pools オブジェクト
    :widths: 20 12 68
    :header-rows: 1
    
    * - キー
      - データ型
      - 説明
    * - enable
      - 論理型
      - このポーリング処理を行うか否か.
    * - rid
      - 整数又は文字列
      - 対象ノードの RIDを '0xNN' 形式の16進数もしくは整数で指定する.
    * - unitId
      - 整数又は文字列
      - PLC機器の Modbus ユニット ID. 1 〜 247 又は 255 (TCPプロトコルのみ).
        '0x' で始まる 16進数表記の文字列入力も可能.
    * - maker
      - 文字列
      - Modbus モデルファイルに定義されるメーカー名 (64byte).
    * - product
      - 文字列
      - Modbus モデルファイルに定義されるプロダクト名 (64byte).
    * - model
      - 文字列
      - Modbus モデルファイルに定義されるmodel名 (64byte).
    * - sku
      - 文字列
      - Modbus モデルファイルに定義される sku 名 (64byte).
    * - interval
      - 整数値
      - データを取得する間隔(sec). デフォルト値は 60.
    * - time_sync
      - 論理値
      - 基準時刻制御モード. デフォルト値は false.
    * - base_time
      - 文字列
      - 基準時刻制御モードの基準時刻を 'HH:MM' 形式で指定する. デフォルト値は '00:00'.
    * - description
      - 文字列
      - モデリングファイル上のコメント.

.. raw:: latex

   \clearpage

モデル別オブジェクト
===============================

SW4X_COMMON オブジェクト
-------------------------------

| SW4X_COMMON オブジェクトには、各モデル共通のキー等が設定されます。
| SW4X_COMMON オブジェクトで設定可能なブジェクトを示します。

.. list-table:: SW4X_COMMON オブジェクト
    :widths: 20 12 68
    :header-rows: 1
    
    * - キー
      - データ型
      - 説明
    * - keys
      - JSON配列
      - オブジェクト数 25
    * - infos
      - JSON obj
      - 
    * - nodeInfos
      - JSON obj
      - 

.. raw:: latex

   \clearpage

SW4X_COMMONオブジェクトに記載される keys オブジェクトの並びとデフォルト値を示します。

.. list-table:: SW4X_COMMON の keys オブジェクト
    :widths: 4 30 9 7 6 44
    :header-rows: 1

    * - 列番
      - key
      - include
      - form
      - ratio
      - 説明
    * - 1
      - timestamp
      - true
      - 
      - 
      - ISO8601拡張書式タイムスタンプ
    * - 2
      - unitId
      - true
      - HEX
      - 
      - SID データの送信元 ID
    * - 3
      - unitType
      - true
      - HEX
      - 
      - ユニットのタイプコード
    * - 4
      - model
      - false
      - 
      - 
      - モデル名
    * - 5
      - description
      - false
      - 
      - 
      - モデルの機能概要
    * - 6
      - ctrlCode
      - false
      - HEX
      - 
      - 制御コード
    * - 7
      - batteryVoltage
      - true
      - HEX
      - 
      - 電池電圧の状態コード

        0x00:
            2.8V以上
        0x01:
            BLD1(2.5～2.8V)
        0x02:
            BLD2(2.5V未満）
    * - 8
      - swVersion
      - true
      - 
      - 
      - ノードのソフトウェアバージョン NNN.NNN.NNN
    * - 9
      - routes
      - true
      - 
      - 
      - 経路情報を付加するか否か
    * - 10
      - unitId
      - 
      - HEX
      - 
      - 経路情報のデータ中継ユニットID
    * - 11
      - RSSI
      - 
      - HEX
      - 
      - 経路情報の RSSI
    * - 12
      - rid
      - true
      - HEX
      - 
      - RID
    * - 13
      - gid
      - false
      - HEX
      -
      - GID
    * - 14
      - rfChannel
      - false
      - dec
      - 
      - 無線チャンネル番号
    * - 15
      - rfPower
      - false
      - dec
      - 
      - 無線出力 1 or 20 (mW)
    * - 16
      - cmd
      - true
      - 
      - 
      - コマンド文字列
    * - 17
      - msg
      - true
      - 
      - 
      - メッセージ文字列
    * - 18
      - nodeInfos
      - false
      - 
      - 
      - nodeInfos オブジェクト
    * - 19
      - errorCode
      - true
      - HEX
      - 
      - エラーコード
    * - 20
      - rawData
      - 
      - 
      - 
      - RAWモード時のデータ
    * - 21
      - request_from
      - true
      - 
      - 
      - 応答メッセージに含まれるリクエスト元クラウドID
    * - 22
      - reply_to
      - true
      - 
      - 
      - 応答メッセージに含まれるリクエストメッセージの MD5
    * - 23
      - result
      - true
      - bool
      - 
      - 応答メッセージに含まれるリクエスト実行の成否
    * - 24
      - reason	
      - true
      - 
      - 
      - 応答メッセージに含まれるリクエスト失敗時のエラーメッセージ
    * - 25
      - request
      - true
      - 
      - 
      - 応答メッセージに含まれるリクエストメッセージ

.. raw:: latex

   \clearpage

SW42P0_x01 オブジェクト
-------------------------------

SW42P0_x01 オブジェクトで設定可能なブジェクトを示します。

.. list-table:: SW42P0_x01 オブジェクト
    :widths: 20 12 68
    :header-rows: 1
    
    * - キー
      - データ型
      - 説明
    * - enable
      - 論理型
      - デフォルト値 true
    * - keys
      - JSON配列
      - オブジェクト数 2
    * - infos
      - JSON obj
      - 
    * - precision
      - 整数値
      - デフォルト値 5

SW42P0_x01 オブジェクトに記載される keys オブジェクトの並びとデフォルト値を示します。

.. list-table::  SW42P0_x01 の keys オブジェクト
    :widths: 4 30 9 7 6 44
    :header-rows: 1

    * - 列番
      - key
      - include
      - form
      - ratio
      - 説明
    * - 1
      - temperature
      - true
      - 
      - -1
      - 温度(℃)  -79.9 〜 79.9
    * - 2
      - tempeStaus
      - true
      - bool
      - 
      - 温度の測定ステータス

SW4210_1202 オブジェクト
-------------------------------

SW4210_1202 オブジェクトで設定可能なブジェクトを示します。

.. list-table:: SW4210_1202 オブジェクト
    :widths: 20 12 68
    :header-rows: 1
    
    * - キー
      - データ型
      - 説明
    * - enable
      - 論理型
      - デフォルト値 true
    * - keys
      - JSON配列
      - オブジェクト数 4
    * - infos
      - JSON obj
      - 
    * - precision
      - 整数値
      - デフォルト値 5

SW4210_1202 オブジェクトに記載される keys オブジェクトの並びとデフォルト値を示します。

.. list-table:: SW4210_1202 の keys オブジェクト
    :widths: 4 30 9 7 6 44
    :header-rows: 1

    * - 列番
      - key
      - include
      - form
      - ratio
      - 説明
    * - 1
      - temperature
      - true
      - 
      - -1
      - 温度(℃)  -79.9 〜 79.9
    * - 2
      - humidity
      - true
      - 
      - -1	
      - 湿度(%)  0.0 〜 100.0
    * - 3
      - tempeStaus
      - true
      - bool
      - 
      - 温度の測定ステータス
    * - 4
      - humidStaus
      - true
      - bool
      - 
      - 湿度の測定ステータス

.. raw:: latex

   \clearpage

SW4210_1205 オブジェクト
-------------------------------

SW4210_1205 オブジェクトで設定可能なブジェクトを示します。

.. list-table:: SW4210_1205 オブジェクト
    :widths: 20 12 68
    :header-rows: 1
    
    * - キー
      - データ型
      - 説明
    * - enable
      - 論理型
      - デフォルト値 true
    * - keys
      - JSON配列
      - オブジェクト数 2
    * - infos
      - JSON obj
      - 
    * - precision
      - 整数値
      - デフォルト値 5

SW4210_1205 オブジェクトに記載される keys オブジェクトの並びとデフォルト値を示します。

.. list-table::  SW4210_1205 の keys オブジェクト
    :widths: 4 30 9 7 6 44
    :header-rows: 1

    * - 列番
      - key
      - include
      - form
      - ratio
      - 説明
    * - 1
      - illuminance
      - true
      - 
      - 0
      - 照度(lx)  0 〜 99999
    * - 2
      - illumStatus
      - true
      - bool
      - 
      - 照度の測定ステータス

SW4210_1204 オブジェクト
-------------------------------

SW4210_1204 オブジェクトで設定可能なブジェクトを示します。

.. list-table:: SW4210_1204 オブジェクト
    :widths: 20 12 68
    :header-rows: 1
    
    * - キー
      - データ型
      - 説明
    * - enable
      - 論理型
      - デフォルト値 true
    * - keys
      - JSON配列
      - オブジェクト数 6
    * - infos
      - JSON obj
      - 
    * - precision
      - 整数値
      - デフォルト値 5

SW4210_1204 オブジェクトに記載される keys オブジェクトの並びとデフォルト値を示します。

.. list-table::  SW4210_1204 の keys オブジェクト
    :widths: 4 30 9 7 6 44
    :header-rows: 1

    * - 列番
      - key
      - include
      - form
      - ratio
      - 説明
    * - 1
      - temperature
      - true
      - 
      - -1
      - 温度(℃)  -79.9 〜 79.9
    * - 2
      - humidity
      - true
      - 
      - -1
      - 湿度(%)  0.0 〜 100.0
    * - 3
      - illuminance
      - true
      - 
      - 0
      - 照度(lx) 0 〜 99999
    * - 4
      - tempeStaus
      - true
      - bool
      - 
      - 温度の測定ステータス
    * - 5
      - humidStaus
      - true
      - bool
      - 
      - 湿度の測定ステータス
    * - 6
      - illumStatus
      - true
      - bool
      - 
      - 照度の測定ステータス

.. raw:: latex

   \clearpage

SW4220_1000 オブジェクト
-------------------------------

SW4220_1000 オブジェクトで設定可能なブジェクトを示します。

.. list-table:: SW4220_1000 オブジェクト
    :widths: 20 12 68
    :header-rows: 1
    
    * - キー
      - データ型
      - 説明
    * - enable
      - 論理型
      - デフォルト値 true
    * - keys
      - JSON配列
      - オブジェクト数 3
    * - infos
      - JSON obj
      - 
    * - precision
      - 整数値
      - デフォルト値 17

SW4220_1000 オブジェクトに記載される keys オブジェクトの並びとデフォルト値を示します。

.. list-table::  SW4220_1000 の keys オブジェクト
    :widths: 4 30 9 7 6 44
    :header-rows: 1

    * - 列番
      - key
      - include
      - form
      - ratio
      - 説明
    * - 1
      - humanCount
      - true
      - 
      - 0
      - 人感検出回数 0 〜 4095
    * - 2
      - detectionMaxWidth
      - true
      - 
      - 1
      - 人感検出幅 MAX 0 〜 255
    * - 3
      - detectionMinWidth
      - true
      - 
      - 1
      - 人感検出幅 MIN 0 〜 255

SW4240_1000 オブジェクト
-------------------------------

SW4240_1000 オブジェクトで設定可能なブジェクトを示します。

.. list-table:: SW4240_1000 オブジェクト
    :widths: 20 12 68
    :header-rows: 1
    
    * - キー
      - データ型
      - 説明
    * - enable
      - 論理型
      - デフォルト値 true
    * - keys
      - JSON配列
      - オブジェクト数 3
    * - infos
      - JSON obj
      - 
    * - precision
      - 整数値
      - デフォルト値 17

SW4240_1000 オブジェクトに記載される keys オブジェクトの並びとデフォルト値を示します。

.. list-table::  SW4240_1000 の keys オブジェクト
    :widths: 4 30 9 7 6 44
    :header-rows: 1

    * - 列番
      - key
      - include
      - form
      - ratio
      - 説明
    * - 1
      - pulseCount1
      - true
      - 
      - 0
      - パルスカウント数1 0 〜 99999999
    * - 2
      - pulseCount2
      - true
      - 
      - 0
      - パルスカウント数2 0 〜 99999999
    * - 3
      - eepromStatus
      - true
      - bool
      - 
      - EEPROM ステータス

.. raw:: latex

   \clearpage

SW4220_1020 オブジェクト
-------------------------------

SW4220_1020 オブジェクトで設定可能なブジェクトを示します。

.. list-table:: SW4220_1020 オブジェクト
    :widths: 20 12 68
    :header-rows: 1
    
    * - キー
      - データ型
      - 説明
    * - enable
      - 論理型
      - デフォルト値 true
    * - keys
      - JSON配列
      - オブジェクト数 2
    * - infos
      - JSON obj
      - 
    * - precision
      - 整数値
      - デフォルト値 17

SW4220_1020 オブジェクトに記載される keys オブジェクトの並びとデフォルト値を示します。

.. list-table::  SW4220_1020 の keys オブジェクト
    :widths: 4 30 9 7 6 44
    :header-rows: 1

    * - 列番
      - key
      - include
      - form
      - ratio
      - 説明
    * - 1
      - humanDetectCount
      - true
      - 
      - 0
      - 人感検知カウント 0 〜 99999999
    * - 2
      - periodic
      - true
      - bool
      - 
      - 定期送信を示すフラグ

.. raw:: latex

   \clearpage

SW42J0_1202 オブジェクト
-------------------------------

SW42J0_1202 オブジェクトで設定可能なブジェクトを示します。

.. list-table:: SW42J0_1202 オブジェクト
    :widths: 20 12 68
    :header-rows: 1
    
    * - キー
      - データ型
      - 説明
    * - enable
      - 論理型
      - デフォルト値 true
    * - keys
      - JSON配列
      - オブジェクト数 7
    * - infos
      - JSON obj
      - 
    * - precision
      - 整数値
      - デフォルト値 5

SW42J0_1202 オブジェクトに記載される keys オブジェクトの並びとデフォルト値を示します。

.. list-table::  SW42J0_1202 の keys オブジェクト
    :widths: 4 30 9 7 6 44
    :header-rows: 1

    * - 列番
      - key
      - include
      - form
      - ratio
      - 説明
    * - 1
      - temperature
      - true
      - 
      - -1
      - 温度(℃) -79.9 〜 79.9
    * - 2
      - humidity
      - true
      - 
      - -1
      - 湿度(%) 0.0 〜 100.0
    * - 3
      - tempeStaus
      - true
      - bool
      - 
      - 温度の測定ステータス
    * - 4
      - humidStaus
      - true
      - bool
      - 
      - 湿度の測定ステータス
    * - 5
      - subCrtlCode
      - true
      - HEX
      - 
      - サブ制御コード
    * - 6
      - confData
      - true
      - 
      - 
      - 設定データ. ノードの設定情報バイト列.
    * - 7
      - cmdRespons
      - true
      - 
      - 
      - 受信確認レスポンスバイト列.

.. raw:: latex

   \clearpage

SW42K0_1000 オブジェクト
-------------------------------

SW42K0_1000 オブジェクトで設定可能なブジェクトを示します。

.. list-table:: SW42K0_1000 オブジェクト
    :widths: 20 12 68
    :header-rows: 1
    
    * - キー
      - データ型
      - 説明
    * - enable
      - 論理型
      - デフォルト値 true
    * - keys
      - JSON配列
      - オブジェクト数 2
    * - infos
      - JSON obj
      - 
    * - precision
      - 整数値
      - デフォルト値 15

SW42K0_1000 オブジェクトに記載される keys オブジェクトの並びとデフォルト値を示します。

.. list-table::  SW42K0_1000 の keys オブジェクト
    :widths: 4 30 9 7 6 44
    :header-rows: 1

    * - 列番
      - key
      - include
      - form
      - ratio
      - 説明
    * - 1
      - integralPowerConsum
      - true
      - 
      - -4
      - 積算電力(Kwh) 0.0000 〜 99999999.9999
    * - 2
      - eepromStatus
      - true
      - bool
      - 
      - EEPROM ステータス

.. raw:: latex

   \clearpage

SW42DD_1000 オブジェクト
-------------------------------

SW42DD_1000 オブジェクトで設定可能なブジェクトを示します。

.. list-table:: SW42DD_1000 オブジェクト
    :widths: 20 12 68
    :header-rows: 1
    
    * - キー
      - データ型
      - 説明
    * - enable
      - 論理型
      - デフォルト値 true
    * - keys
      - JSON配列
      - オブジェクト数 26
    * - infos
      - JSON obj
      - 
    * - precision
      - 整数値
      - デフォルト値 15

.. raw:: latex

   \clearpage

SW42DD_1000 オブジェクトに記載される keys オブジェクトの並びとデフォルト値を示します。

.. list-table::  SW42DD_1000 の keys オブジェクト
    :widths: 4 30 9 7 6 44
    :header-rows: 1

    * - 列番
      - key
      - include
      - form
      - ratio
      - 説明
    * - 1
      - distributionSystem12
      - true
      - 
      - 
      - CH1,2の配電方式.

        1P2W(1CT): 
            単相二線式1CT
        3P3W(1CT): 
            三相三線式1CT
        1P3W(2CT):
            単相三線式2CT
        3P3W(2CT):
            三相三線式2CT
    * - 2
      - distributionSystem34
      - true
      - 
      - 
      - CH3,4の配電方式. 前項と同じ
    * - 3
      - outputChannel1
      - true
      - bool
      - 
      - CH1の出力状態
    * - 4
      - outputChannel2
      - true
      - bool
      - 
      - CH2の出力状態
    * - 5
      - outputChannel3
      - true
      - bool
      - 
      - CH3の出力状態
    * - 6
      - outputChannel4
      - true
      - bool
      - 
      - CH4の出力状態
    * - 7
      - meanCurrent1
      - true
      - 
      - -3
      - CH1平均電流(A)  0.000 〜 9.999
    * - 8
      - meanCurrent2
      - true
      - 
      - -3
      - CH2平均電流(A)  0.000 〜 9.999
    * - 9
      - meanCurrent3
      - true
      - 
      - -3
      - CH3平均電流(A)  0.000 〜 9.999
    * - 10
      - meanCurrent4
      - true
      - 
      - -3
      - CH4平均電流(A)  0.000 〜 9.999
    * - 11
      - instantCurrent1
      - true
      - 
      - -3
      - CH1瞬時電流(A)  0.000 〜 9.999
    * - 12
      - instantCurrent2
      - true
      - 
      - -3
      - CH2瞬時電流(A)  0.000 〜 9.999
    * - 13
      - instantCurrent3
      - true
      - 
      - -3
      - CH3瞬時電流(A)  0.000 〜 9.999
    * - 14
      - instantCurrent4
      - true
      - 
      - -3
      - CH4瞬時電流(A)  0.000 〜 9.999
    * - 15
      - meanPower1
      - true
      - 
      - -3
      - CH1平均電力(Kw)  0.000 〜 9.999
    * - 16
      - meanPower2
      - true
      - 
      - -3
      - CH2平均電力(Kw)  0.000 〜 9.999
    * - 17
      - meanPower3
      - true
      - 
      - -3
      - CH3平均電力(Kw)  0.000 〜 9.999
    * - 18
      - meanPower4
      - true
      - 
      - -3
      - CH4平均電力(Kw)  0.000 〜 9.999
    * - 19
      - instantPower1
      - true
      - 
      - -3
      - CH1瞬時電力(Kw)  0.000 〜 9.999
    * - 20
      - instantPower2
      - true
      - 
      - -3
      - CH2瞬時電力(Kw)  0.000 〜 9.999
    * - 21
      - instantPower3
      - true
      - 
      - -3
      - CH3瞬時電力(Kw)  0.000 〜 9.999
    * - 22
      - instantPower4
      - true
      - 
      - -3
      - CH4瞬時電力(Kw)  0.000 〜 9.999
    * - 23
      - integralPowerConsum1
      - true
      - 
      - -2
      - CH1積算有効電力量(Kwh)
        
        0.00 〜 9999999.99
    * - 24
      - integralPowerConsum2
      - true
      - 
      - -2
      - CH2積算有効電力量(Kwh)
        
        0.00 〜 9999999.99
    * - 25
      - integralPowerConsum3
      - true
      - 
      - -2
      - CH3積算有効電力量(Kwh)
        
        0.00 〜 9999999.99
    * - 26
      - integralPowerConsum4
      - true
      - 
      - -2
      - CH4積算有効電力量(Kwh)
        
        0.00 〜 9999999.99

.. raw:: latex

   \clearpage

SW42DD_1100 オブジェクト
-------------------------------

SW42DD_1100 オブジェクトで設定可能なブジェクトを示します。

.. list-table:: SW42DD_1100 オブジェクト
    :widths: 20 12 68
    :header-rows: 1
    
    * - キー
      - データ型
      - 説明
    * - enable
      - 論理型
      - デフォルト値 true
    * - keys
      - JSON配列
      - オブジェクト数 26
    * - infos
      - JSON obj
      - 
    * - precision
      - 整数値
      - デフォルト値 15

.. raw:: latex

   \clearpage

SW42DD_1100 オブジェクトに記載される keys オブジェクトの並びとデフォルト値を示します。

.. list-table::  SW42DD_1100 の keys オブジェクト
    :widths: 4 30 9 7 6 44
    :header-rows: 1

    * - 列番
      - key
      - include
      - form
      - ratio
      - 説明
    * - 1
      - distributionSystem12
      - true
      - 
      - 
      - CH1,2の配電方式.

        1P2W(1CT): 
            単相二線式1CT
        3P3W(1CT): 
            三相三線式1CT
        1P3W(2CT): 
            単相三線式2CT
        3P3W(2CT): 
            三相三線式2CT
    * - 2
      - distributionSystem34
      - true
      - 
      - 
      - CH3,4の配電方式. 前項と同じ
    * - 3
      - outputChannel1
      - true
      - bool
      - 
      - CH1の出力状態
    * - 4
      - outputChannel2
      - true
      - bool
      - 
      - CH2の出力状態
    * - 5
      - outputChannel3
      - true
      - bool
      - 
      - CH3の出力状態
    * - 6
      - outputChannel4
      - true
      - bool
      - 
      - CH4の出力状態
    * - 7
      - meanCurrent1
      - true
      - 
      - -1
      - CH1平均電流(A)  0.0 〜 999.9
    * - 8
      - meanCurrent2
      - true
      - 
      - -1
      - CH2平均電流(A)  0.0 〜 999.9
    * - 9
      - meanCurrent3
      - true
      - 
      - -1
      - CH3平均電流(A)  0.0 〜 999.9
    * - 10
      - meanCurrent4
      - true
      - 
      - -1
      - CH4平均電流(A)  0.0 〜 999.9
    * - 11
      - instantCurrent1
      - true
      - 
      - -1
      - CH1瞬時電流(A)  0.0 〜 999.9
    * - 12
      - instantCurrent2
      - true
      - 
      - -1
      - CH2瞬時電流(A)  0.0 〜 999.9
    * - 13
      - instantCurrent3
      - true
      - 
      - -1
      - CH3瞬時電流(A)  0.0 〜 999.9
    * - 14
      - instantCurrent4
      - true
      - 
      - -1
      - CH4瞬時電流(A)  0.00 〜 999.9
    * - 15
      - meanPower1
      - true
      - 
      - -2
      - CH1平均電力(Kw)  0.00 〜 99.99
    * - 16
      - meanPower2
      - true
      - 
      - -2
      - CH2平均電力(Kw)  0.00 〜 99.99
    * - 17
      - meanPower3
      - true
      - 
      - -2
      - CH3平均電力(Kw)  0.00 〜 99.99
    * - 18
      - meanPower4
      - true
      - 
      - -2
      - CH4平均電力(Kw)  0.00 〜 99.99
    * - 19
      - instantPower1
      - true
      - 
      - -2
      - CH1瞬時電力(Kw)  0.00 〜 99.99
    * - 20
      - instantPower2
      - true
      - 
      - -2
      - CH2瞬時電力(Kw)  0.00 〜 99.99
    * - 21
      - instantPower3
      - true
      - 
      - -2
      - CH3瞬時電力(Kw)  0.00 〜 99.99
    * - 22
      - instantPower4
      - true
      - 
      - -2
      - CH4瞬時電力(Kw)  0.00 〜 99.99
    * - 23
      - integralPowerConsum1
      - true
      - 
      - -2
      - CH1積算有効電力量(Kwh)
        
        0.00 〜 9999999.99
    * - 24
      - integralPowerConsum2
      - true
      - 
      - -2
      - CH2積算有効電力量(Kwh)
        
        0.00 〜 9999999.99
    * - 25
      - integralPowerConsum3
      - true
      - 
      - -2
      - CH3積算有効電力量(Kwh)
        
        0.00 〜 9999999.99
    * - 26
      - integralPowerConsum4
      - true
      - 
      - -2
      - CH4積算有効電力量(Kwh)

        0.00 〜 9999999.99

.. raw:: latex

   \clearpage

SW42D0_1000 オブジェクト
-------------------------------

SW42D0_1000 オブジェクトで設定可能なブジェクトを示します。

.. list-table:: SW42DD_1000 オブジェクト
    :widths: 20 12 68
    :header-rows: 1
    
    * - キー
      - データ型
      - 説明
    * - enable
      - 論理型
      - デフォルト値 true
    * - keys
      - JSON配列
      - オブジェクト数 19
    * - infos
      - JSON obj
      - 
    * - precision
      - 整数値
      - デフォルト値 15

SW42D0_1000 オブジェクトに記載される keys オブジェクトの並びとデフォルト値を示します。

.. list-table::  SW42D0_1000 の keys オブジェクト
    :widths: 4 30 9 7 6 44
    :header-rows: 1

    * - 列番
      - key
      - include
      - form
      - ratio
      - 説明
    * - 1
      - channel1LowCurrent
      - true
      - bool
      - 
      - CH1の電流が1A未満
    * - 2
      - distributionSystem12
      - true
      - 
      -
      - CH1,2の配電方式.

        1P2W(1CT):
            単相二線式1CT
        3P3W(1CT):
            三相三線式1CT
        1P3W(2CT):
            単相三線式2CT
        3P3W(2CT):
            三相三線式2CT
    * - 3
      - distributionSystem34
      - true
      - 
      -
      - CH3,4の配電方式. 前項と同じ
    * - 4
      - outputChannel1
      - true
      - bool
      - 
      - CH1の出力状態
    * - 5
      - outputChannel2
      - true
      - bool
      - 
      - CH2の出力状態
    * - 6
      - outputChannel3
      - true
      - bool
      - 
      - CH3の出力状態
    * - 7
      - outputChannel4
      - true
      - bool
      - 
      - CH4の出力状態
    * - 8
      - current1
      - true
      - 
      - -1
      - CH1電流(A)  0.0 〜 999.9
    * - 9
      - current2
      - true
      - 
      - -1
      - CH2電流(A)  0.0 〜 999.9
    * - 10
      - current3
      - true
      -
      - -1
      - CH3電流(A)  0.0 〜 999.9
    * - 11
      - current4
      - true
      - 
      - -1
      - CH4電流(A)  0.0 〜 999.9
    * - 12
      - power1
      - true
      - 
      - -1
      - CH1電力(Kw)  0.0 〜 999.9
    * - 13
      - power2
      - true
      - 
      - -1
      - CH2電力(Kw)  0.0 〜 999.9
    * - 14
      - power3
      - true
      - 
      - -1
      - CH3電力(Kw)  0.0 〜 999.9
    * - 15
      - power4
      - true
      - 
      - -1
      - CH4電力(Kw)  0.0 〜 999.9
    * - 16
      - integralPowerConsum1
      - true
      - 
      - -1
      - CH1積算有効電力量(Kwh)

        0.0 〜 99999999.9
    * - 17
      - integralPowerConsum2
      - true
      - 
      - -1
      - CH2積算有効電力量(Kwh)

        0.0 〜 99999999.9
    * - 18
      - integralPowerConsum3
      - true
      - 
      - -1
      - CH3積算有効電力量(Kwh)

        0.0 〜 99999999.9
    * - 19
      - integralPowerConsum4
      - true
      - 
      - -1
      - CH4積算有効電力量(Kwh)
        
        0.0 〜 99999999.9

.. raw:: latex

   \clearpage

SW4230_1000 オブジェクト
-------------------------------

SW4230_1000 オブジェクトで設定可能なブジェクトを示します。

.. list-table:: SW4230_1000 オブジェクト
    :widths: 20 12 68
    :header-rows: 1
    
    * - キー
      - データ型
      - 説明
    * - enable
      - 論理型
      - デフォルト値 true
    * - keys
      - JSON配列
      - オブジェクト数 3
    * - inits
      - JSON配列
      - 	
    * - polls
      - JSON配列
      - 汎用 polls オブジェクト
    * - infos
      - JSON obj
      - 
    * - precision
      - 整数値
      - デフォルト値 17

SW4230_1000 オブジェクトに記載される keys オブジェクトの並びとデフォルト値を示します。

.. list-table::  SW4230_1000 の keys オブジェクト
    :widths: 4 30 9 7 6 44
    :header-rows: 1

    * - 列番
      - key
      - include
      - form
      - ratio
      - 説明
    * - 1
      - co2
      - true
      - 
      - 0
      - 二酸化炭素濃度 (ppm)  0 〜 99999
    * - 2
      - altitude
      - true
      - 
      - 0
      - 高度 (m)  0 〜 9999
    * - 3
      - periodicCode
      - true
      - HEX
      - 
      - 読みだし周期コード.

        0x00: 無し
        0x01: 1分
        0x02: 5分
        0x03: 10分

.. raw:: latex

   \clearpage

SW4260_1x00 オブジェクト
-------------------------------

SW4260_1x00 オブジェクトで設定可能なブジェクトを示します。

.. list-table:: SW4260_1x00 オブジェクト
    :widths: 20 12 68
    :header-rows: 1
    
    * - キー
      - データ型
      - 説明
    * - enable
      - 論理型
      - デフォルト値 true
    * - keys
      - JSON配列
      - オブジェクト数 15
    * - inits
      - JSON配列
      - 	
    * - polls
      - JSON配列
      - 汎用 polls オブジェクト
    * - infos
      - JSON obj
      - 
    * - precision
      - 整数値
      - デフォルト値 15

SW4260_1x00 オブジェクトに記載される keys オブジェクトの並びとデフォルト値を示します。

.. list-table::  SW4260_1x00 の keys オブジェクト
    :widths: 4 30 9 7 6 44
    :header-rows: 1

    * - 列番
      - key
      - include
      - form
      - ratio
      - 説明
    * - 1
      - sensorNo
      - true
      - dec
      - 
      - センサー番号
    * - 2
      - voltageP1P2
      - true
      - 
      - -2
      - P1-P2間電圧 (V)  0.00 〜 99999.90
    * - 3
      - voltageP2P3
      - true
      - 
      - -2
      - P2-P3間電圧 (V)  0.00 〜 99999.90
    * - 4
      - current1
      - true
      - 
      - -2
      - I1電流 (A)  0.00 〜 9999.99
    * - 5
      - current2
      - true
      - 
      - -2
      - I2電流 (A)  0.00 〜 9999.99
    * - 6
      - activePower
      - true
      - 
      - -2
      - 有効電力 (Kw)  -9999999.99 〜 9999999.99
    * - 7
      - powerFactor
      - true
      - 
      - -2
      - 力率  -1.00 〜 1.00
    * - 8
      - frequency
      - true
      - 
      - -2
      - 周波数 (Hz)  45.00 〜 65.00
    * - 9
      - integralPowerConsum
      - true
      - 
      - -2
      - 積算電力量 (kwh)  0.00 〜 999999999.00
    * - 10
      - sensorStatus
      - true
      - 
      - 
      - センサーステータス 0xNNNN
    * - 11
      - sensorVersion
      - true
      - 
      - 
      - センサースバージョン 0xNNNNNNNN
    * - 12
      - sensorParameter
      - true
      - dec
      - 
      - センサーパラメタ番号 0 〜 9
    * - 13
      - sensorConfig
      - true
      - 
      - 
      - センサーパラメタ設定値 0xNNNNNN
    * - 14
      - periodicCode
      - true
      - HEX
      - 
      - 読みだし周期コード.

        0x00:
            無し
        0x01:
            1分
        0x02:
            5分
        0x03:
            10分
    * - 15
      - sensorConnected
      - true
      - 
      - 
      - 接続センサー番号 0xNNNNNNNN

.. raw:: latex

   \clearpage

.. _data_handler_reference_sw4x_sw4280_obj:

SW4280_1000 オブジェクト
-------------------------------

SW4280_1000 オブジェクトで設定可能なブジェクトを示します。

.. list-table:: SW4280_1000 オブジェクト
    :widths: 20 12 68
    :header-rows: 1
    
    * - キー
      - データ型
      - 説明
    * - enable
      - 論理型
      - デフォルト値 true
    * - keys
      - JSON配列
      - オブジェクト数 4
    * - inits
      - JSON配列
      - SW-4280-1000 Modbus RTU ノード用 polls オブジェクト
    * - polls
      - JSON配列
      - 
    * - infos
      - JSON obj
      - 
    * - precision
      - 整数値
      - Modbus モデリングファイルの設定を優先

SW4280_1000 オブジェクトに記載される keys オブジェクトの並びとデフォルト値を示します。

.. list-table::  SW4280_1000 の keys オブジェクト
    :widths: 4 30 9 7 6 44
    :header-rows: 1

    * - 列番
      - key
      - include
      - form
      - ratio
      - 説明
    * - 1
      - length
      - true
      - dec
      - 
      - Modbus メッセージ長 6 〜 10
    * - 2
      - modbusId
      - true
      - HEX
      - 
      - Modbus アドレス.
        
        Modbus のユニット ID 0xNN
    * - 3
      - unitId
      - true
      - HEX
      - 
      - SID データの送信元 ID
    * - 4
      - modbusFunction
      - true
      - HEX
      - 
      - Modbus のファンクション番号 0xNN
    * - 5
      - modbusData
      - true
      - 
      - 
      - Modbus ノードを介して取得したデータ
        
        0xNNNNNNNNNNNNNNNN

| polls オブジェクトに設定されたポーリング処理は Modbus モデリングファイルに応じたキー/バリューフォーマットで出力されます。
| 本 keys オブジェクトに設定されるフォームは、下流方向制御等によって SW-4280-1000 Modbus RTU ノードより意図しないメッセージが、送られて来た場合にのみ適用されます。

.. raw:: latex

   \clearpage

SW4260_1x20 オブジェクト
-------------------------------

SW4260_1x20 オブジェクトで設定可能なブジェクトを示します。

.. list-table:: SW4260_1x20 オブジェクト
    :widths: 20 12 68
    :header-rows: 1
    
    * - キー
      - データ型
      - 説明
    * - enable
      - 論理型
      - デフォルト値 true
    * - keys
      - JSON配列
      - オブジェクト数 18
    * - inits
      - JSON配列
      - 	
    * - polls
      - JSON配列
      - 汎用 polls オブジェクト
    * - infos
      - JSON obj
      - 
    * - precision
      - 整数値
      - デフォルト値 15

SW4260_1x20 オブジェクトに記載される keys オブジェクトの並びとデフォルト値を示します。

.. list-table::  SW4260_1x20 の keys オブジェクト
    :widths: 4 30 9 7 6 44
    :header-rows: 1

    * - 列番
      - key
      - include
      - form
      - ratio
      - 説明
    * - 1
      - circuitNo
      - true
      - dec
      - 
      - 回線番号
    * - 2
      - voltage1
      - true
      - 
      - -2
      - 電圧1 (V)  0.00 〜 999999.90
    * - 3
      - voltage2
      - true
      - 
      - -2
      - 電圧2 (V)  0.00 〜 999999.90
    * - 4
      - voltage3
      - true
      - 
      - -2
      - 電圧3 (V)  0.00 〜 999999.90
    * - 5
      - current1
      - true
      - 
      - -2
      - 電流1 (A)  0.00 〜  99999.99
    * - 6
      - current2
      - true
      - 
      - -2
      - 電流2 (A)  0.00 〜  99999.99
    * - 7
      - current3
      - true
      - 
      - -2
      - 電流3 (A)  0.00 〜  99999.99
    * - 8
      - activePower
      - true
      - 
      - -2
      - 有効電力 (Kw) -214748.36 〜 214748.36
    * - 9
      - activePowerW
      - true
      -
      - -2
      - 有効電力 (W) 

        -214748364.70 〜 214748364.70
    * - 10
      - reactivePower
      - true
      - 
      - -2
      - 無効電力 (Var)

        -214748364.70 〜 214748364.70
    * - 11
      - powerFactor
      - true
      - 
      - -2
      - 力率  -1.00 〜 1.00
    * - 12
      - frequency
      - true
      - 
      - -2
      - 周波数 (Hz)  45.00 〜 65.00
    * - 13
      - integralPowerConsum
      - true
      - 
      - -2
      - 積算電力量 (Kwh) 0.00 〜 999999999.00
    * - 14
      - integralPowerConsumW
      - true
      - 
      - -2
      - 積算電力量 (Wh) 0.00 〜 999999999.00
    * - 15
      - sensorStatus
      - true
      - 
      - 
      - センサーステータス 0xNNNN
    * - 16
      - sensorVersion
      - true
      - 
      - 
      - センサースバージョン 0xNNNNNNNN
    * - 17
      - periodicCode
      - true
      - HEX
      - 
      - 読みだし周期コード.

        0x00:
            無し
        0x01:
            1分
        0x02:
            5分
        0x03:
            10分
    * - 18
      - sensorConnected
      - true
      - 
      - 
      - 接続回線番号 0xNNNNNNNN

.. raw:: latex

   \clearpage

SW42L0_4000 オブジェクト
-------------------------------

SW42L0_4000 オブジェクトで設定可能なブジェクトを示します。

.. list-table:: SW42L0_4000 オブジェクト
    :widths: 20 12 68
    :header-rows: 1
    
    * - キー
      - データ型
      - 説明
    * - enable
      - 論理型
      - デフォルト値 true
    * - keys
      - JSON配列
      - オブジェクト数 6
    * - infos
      - JSON obj
      - 
    * - precision
      - 整数値
      - デフォルト値 5

SW42L0_4000 オブジェクトに記載される keys オブジェクトの並びとデフォルト値を示します。

.. list-table::  SW42L0_4000 の keys オブジェクト
    :widths: 4 30 9 7 6 44
    :header-rows: 1

    * - 列番
      - key
      - include
      - form
      - ratio
      - 説明
    * - 1
      - pulse
      - true
      - 
      - 0
      - 脈拍(bpm)  30 〜 240
    * - 2
      - temperature
      - true
      - 
      - -1
      - 体温(℃)  10.0 〜 45.0
    * - 3
      - sensorStaus
      - true
      - bool
      - 
      - Gセンサーの状態
    * - 4
      - helpAlart
      - true
      - bool
      - 
      - HELP 発報
    * - 5
      - pulseStaus
      - true
      - bool
      - 
      - 脈拍の測定ステータス
    * - 6
      - tempeStaus
      - true
      - bool
      - 
      - 体温の測定ステータス
.. raw:: latex

   \clearpage

SW4000_1000, SW4100_1000, SB4020_1000, SW4300_1000, SW4500_1000 オブジェクト
--------------------------------------------------------------------------------

SW4000_1000, SW4100_1000, SB4020_1000, SW4300_1000, SW4500_1000 オブジェクトで設定可能なブジェクトを示します。

.. list-table:: SW4000_1000, SW4100_1000, SB4020_1000, SW4300_1000, SW4500_1000 オブジェクト
    :widths: 20 12 68
    :header-rows: 1
    
    * - キー
      - データ型
      - 説明
    * - enable
      - 論理型
      - デフォルト値 true
    * - keys
      - JSON配列
      - オブジェクト数 18
    * - inits
      - JSON配列
      - 	

SW4000_1000, SW4100_1000, SB4020_1000, SW4300_1000, SW4500_1000 オブジェクトに記載される keys オブジェクトの並びとデフォルト値を示します。

.. list-table::  SW4000_1000, SW4100_1000, SB4020_1000, SW4300_1000, SW4500_1000 の keys オブジェクト
    :widths: 4 30 9 7 6 44
    :header-rows: 1

    * - 列番
      - key
      - include
      - form
      - ratio
      - 説明
    * - 1
      - periodic
      - true
      - bool
      - 
      - 定期送信を示すフラグ

.. raw:: latex

   \clearpage

================================
RTU モデリングファイルの書式
================================

| RTU モデリングファイルは、モデリングの内 :ref:`data_handler_reference_sw4x_sw4280_obj` の inits オブジェクトと pollsオブジェクトを別ファイルで設定するために用意されたファイルです。
| PD Handler SW4x の RTU モデリングファイルは次の書式で構成されます。 

.. literalinclude:: pd_handler_sw4x_rtu.conf

:ref:`data_handler_reference_sw4x_inits_obj` と :ref:`data_handler_reference_sw4x_sw4280_polls_obj` の polls オブジェクトの書式は、モデリングファイルと同じです。

===================================
Modbus モデリングファイルの書式
===================================

| PD Handler SW4x の Modbus モデリングファイルはの書式は、:ref:`data_handler_reference_modbus2` のモデリングファイルと同じです。
| デフォルトでは :ref:`data_handler_reference_modbus2` と同じファイルを用います。

.. raw:: latex

   \clearpage

======================
基準時刻制御モード
======================

| 基準時刻制御は、polls オブジェクトの time_sync で有効となり、同オブジェクトの interval キーに設定される「取得時間間隔」と base_time キーに設定される「基準時刻」に基づき、定時刻にデータの収集を行う機能です。
| 基準時刻制御における「取得時間間隔」は60, 120, 180, 300, 600, 900, 1800, 3600, 7200, 10800, 14400, 21600, 28800, 43200と86400の倍数に限られます。 「取得時間間隔」としてこれら以外の値が設定されると PD Handler SW4x 内で次のように扱われます。

.. list-table:: 基準時刻制御における取得時間間隔の設定と実動作値
    :header-rows: 1

    * - 取得時間間隔の設定値
      - 実動作値
    * - 0  ～ 199
      - 60
    * - 120 ～ 179
      - 120
    * - 180 ～ 299
      - 180
    * - 300 ～ 599
      - 300
    * - 600 ～ 899
      - 600
    * - 900 ～ 1799
      - 900
    * - 1800 ～ 3599
      - 1800
    * - 3600 ～ 7199
      - 3600
    * - 7200 ～ 10799
      - 7200
    * - 10800 ～ 14399
      - 10800
    * - 14400 ～ 21599
      - 14400
    * - 21600 ～ 28799
      - 21600
    * - 28800 ～ 43199
      - 28800
    * - 43200 ～ 86399
      - 43200
    * - 86400 ～
      - 86400 の倍数

| 「基準時刻」とは動作の起点となる時刻で、例えば「取得時間間隔」を300とし、「基準時刻」を'00:01'とした場合、データの取得は 00:01, 00:06, 00:11 ... 00:56, 01:01 ... 23:56, 00:01の定刻に行われます。
| データの取得開始時刻は「基準時刻」に設定さた時刻そのものではなく、「基準時刻」と「取得時間間隔」から算定される直近の時刻となります。
| 例えば08:30に「基準時刻」'01:05'、「取得時間間隔」10800の設定が行われた場合、最初のデータ取得は10:05に行われ、以降13:05, 16:05, 19:05, 22:05, 01:05の順におこなわれます。

.. raw:: latex

   \clearpage

======================
設定ファイルの書式
======================

構文
=============

.. literalinclude:: pd_handler_sw4x.conf

.. raw:: latex

   \clearpage

設定オブジェクト
====================

.. list-table:: PD Handler sw4x の設定 オブジェクト
    :widths: 20 12 68
    :header-rows: 1
    
    * - キー
      - データ型
      - 説明
    * - sw4x_model_file
      - 文字列
      - モデリングファイル . デフォルト値は '/var/webui/config/pd_handler_sw4x_model.conf'.
        ファイルが実在しない場合は、ハードコーディングされたモデリングが用いられる.  (MAXPATHLEN)
    * - sw4x_rtu
      - 文字列
      - RTU モデリングファイル . デフォルト値は 、'/var/webui/config/pd_handler_sw4x_rtu.conf'.
    * - model_file
      - 文字列
      - Modbusモデリングファイル. デフォルト値は、'/var/webui/config/pd_handler_modbus_2_model.conf'. (MAXPATHLEN)
    * - enable
      - 論理値
      - デフォルト値はfalse.
    * - localname
      - 文字列
      - デバイスのローカル名(デバイス番号). (32byte)
    * - bind
      - 文字列
      - 制御メッセージを受け取るソケット名. 文字列の先頭が '@' の場合はabstract　namespace と解釈します. 
        空の場合は、デフォルト値 '\@/pd_handler/<localname>.sock' が設定されます.
    * - push_to
      - 文字列
      - データの送り先ソケット名. 文字列の先頭が '@' の場合はabstract　namespace と解釈します. 
        空の場合は、デフォルト値 '\@/pd_repeater/<localname>.sock' が設定されます.
    * - buffer_size
      - 整数値
      - データのバッファサイズ(byte). デフォルト値は 4096.
    * - receive
      - 論理値
      - クラウドからメッセージを受け取る(下流方向制御を行う) か否か. デフォルト値はfalse.
    * - reply
      - 論理値
      - 下流方向制御に対しステータスメッセージを返すか否か. デフォルト値は false.
    * - raw
      - 論理値
      - データをパースせずにそのまま文字列として送信する. デフォルト値は false.
    * - uart_device
      - 文字列
      - SW4x 通信モジュールを接続するシリアルデバイスのデバイス名. デフォルト値は '/dev/ttyEX2'
    * - gid
      - 整数値
      - 無線ネットワークの GID. 101 〜 254. デフォルト値は 101.
    * - power20
      - 論理値
      - 無線出力を 1mW から 20mW に切替えるか否か. デフォルト値は true.
    * - channel
      - 整数値
      - 無線チャンネル. 無線出力 1mW 時: 25 〜 75、20mW時: 25〜60、ただし 32,33,61,62,63 を除く. デフォルト値は 60.
    * - rtt
      - 整数値
      - Modbus RTU ノードの Round trip time(msec). デフォルト値は 500(ms).
    * - infos
      - JSON obj
      - 出力に付加されるユーザー定義オブジェクト.

.. raw:: latex

   \clearpage

==========================
メッセージオブジェクト
==========================

コマンド入力オブジェクト
============================

コマンド入力に用いられる JSON オブジェクトを示します。

.. list-table:: コマンド入力オブジェクト
    :widths: 20 12 68
    :header-rows: 1
    
    * - キー
      - データ型
      - 説明
    * - rid
      - 文字列
      - 制御対象ノードの RID を '0xNN' 形式で指定する.
    * - cmd
      - 文字列
      - 制御対象ノードに対する CMD のバイト列を '0xNNNNNNNNNNNNNNNNNNNNNNNN' 形式で指定する. 
        文字列が 2byte + 24byte に満たない場合、下位のバイトは '0x00' で埋めれる. 以下の bNN, unitType, ctlCd, circuitNumber が設定された場合、上書される.
    * - bNN
      - 文字列
      - CMD バイト列の 'NN' 番目に設定するバイト列を '0xNNnnnn' 形式で指定する.
        'NNnnnn' は任意長のバイト列.　例えば 'B07 - B04' を '0x12345678' とする場合は '"b07":"0x12345678"' と指定する.
    * - unitType
      - 文字列
      - ユニットタイプを '0xNN' 形式で指定する. '"b11": "0xNN"' と同義。
    * - ctlCd
      - 文字列
      - 制御コードを '0xNN' 形式で指定する. '"b10": "0xNN"' と同義.
    * - subCtlCd
      - 文字列
      - サブ制御コードを '0xNN' 形式で指定する. '"b09": "0xNN"' と同義.
    * - sensorNumber
      - 文字列
      - センサー番号を '0xNN' 形式で指定する. '"b08": "0xNN"' と同義.
    * - circuitNumber
      - 文字列
      - 回路番号を '0xNN' 形式で指定する. '"b08": "0xNN"' と同義

.. raw:: latex

   \clearpage

応答メッセージオブジェクト
==============================

| SW4000 シリーズ無線センサーネットワークは、コマンド入力に対し非同期に応答するため、応答メッセージは入力されたコマンドが無線センサーネットワークへの出力されたことを通知するものであり、各ノードにおけるコマンドの実行結果については通常のデータ出力メッセージとしてハンドリングされます。
| 応答メッセージは設定オブジェクトの reply キーが true に設定されている場合に出力されます。
| 応答メッセージに用いられる JSON オブジェクトをしめします。

.. list-table:: 応答メッセージオブジェクト
    :widths: 20 12 68
    :header-rows: 1
    
    * - キー
      - データ型
      - 説明
    * - timestamp
      - 文字列
      - コマンド出力時刻. ISO8601拡張書式
    * - request_from
      - 文字列
      - リクエストメッセージの送付元クラウドID
    * - reply_to
      - 文字列
      - リクエストメッセージの MD5
    * - result
      - 論理値
      - 出力ステータス
    * - reason
      - 文字列
      - エラーの理由
    * - request
      - 文字列
      - 入力されたコマンド	
    * - gid
      - 文字列
      - GID	
    * - rfChannel
      - 整数値
      - 無線チャンネル番号	
    * - rfPower
      - 整数値
      - 無線出力(mW)	
    * - nodeInfos
      - JSON obj
      - nodeInfos オブジェクト
    * - infos
      - JSON obj
      - infos オブジェクト

キーの名称と一部のデータ型は、SW4X_COMMN オブジェクトの設定により変更することができます。

.. raw:: latex

   \clearpage

==========================
クラウドからの制御
==========================

例えば、RID '0xFA' の SW4230\_1000 CO2ノードの標高設定を 1234m に設定するのであれば、次のメッセージを送ります。 ::

    {
       "rid": "0xFA",
       "cmd": "0x200102000000000000001234"
    }

設定オブジェクトの reply キーが true に設定されている場合、次の応答メッセージが返されます。 ::

    {
       "timestamp": "2019-11-14T11:30:08.949+09:00"
       "request_from": "0x13(0)",
       "reply_to": "1bf33e22f0c27bcbc9a933580da6bb72",
       "result": true
    }

============================
CLI(pd_handler_sw4x_cli)
============================

| pd_handler_sw4x_cli は、クラウドからの制御をローカルに行うためのアプリケーションです。
| pd_handler_sw4x とはインタフェースが競合するため、pd_handler_sw4x を停止した上で使用して下さい。

pd_handler_sw4x_cli のオプションは次の通りです。 ::

        root# /usr/sbin/pd_handler_sw4x_cli -h
        usages: pd_handler_sw4x_cli [-dqs][-c <conf file>] <RID> <CMD string>
          -c conf file   Conf file. [default: /var/webui/config/pd_handler_sw4x.conf]
          -d             Debug mode.
          -q             Quiet mode.
          -s             Write property to module.

| <RID>は、制御対象ノードの RID を '0xNN' 形式で指定します。
| <CMD string>は、制御対象ノードに対する CMD のバイト列を '0xNNNNNNNNNNNNNNNNNNNNNNNN' 形式で指定します。
| 文字列が 2byte + 24byte に満たない場合、下位のバイトは '0x00' で埋めれます。
| '-s' オプションは SB-4020 通信モジュールに対する書き込みを行うためのオプションでです。

.. raw:: latex

   \clearpage