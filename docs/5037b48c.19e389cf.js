(window.webpackJsonp=window.webpackJsonp||[]).push([[118],{186:function(e,n,t){"use strict";t.r(n),t.d(n,"frontMatter",(function(){return b})),t.d(n,"metadata",(function(){return c})),t.d(n,"rightToc",(function(){return i})),t.d(n,"default",(function(){return d}));var a=t(3),r=t(8),l=(t(0),t(442)),b={id:"pd_agent",title:"PD Agent",sidebar_label:"PD Agent",description:"OpenBlocks\u306b\u7528\u3044\u3066\u3044\u308bIoT\u30b2\u30fc\u30c8\u30a6\u30a7\u30a4\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u300cFW4\u300d\u306e\u30c7\u30fc\u30bf\u30cf\u30f3\u30c9\u30ea\u30f3\u30b0\u8a2d\u5b9a\u30ea\u30d5\u30a1\u30ec\u30f3\u30b9\u30ac\u30a4\u30c9\u306b\u95a2\u3059\u308b\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306e\u300cPD Agent\u300d\u306e\u30da\u30fc\u30b8\u3067\u3059\u3002",keywords:["IoT","Data Handling","PD Agent","agent","reference"]},c={unversionedId:"openblocks/fw4/data_handling_ref/pd_agent",id:"openblocks/fw4/data_handling_ref/pd_agent",isDocsHomePage:!1,title:"PD Agent",description:"OpenBlocks\u306b\u7528\u3044\u3066\u3044\u308bIoT\u30b2\u30fc\u30c8\u30a6\u30a7\u30a4\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u300cFW4\u300d\u306e\u30c7\u30fc\u30bf\u30cf\u30f3\u30c9\u30ea\u30f3\u30b0\u8a2d\u5b9a\u30ea\u30d5\u30a1\u30ec\u30f3\u30b9\u30ac\u30a4\u30c9\u306b\u95a2\u3059\u308b\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306e\u300cPD Agent\u300d\u306e\u30da\u30fc\u30b8\u3067\u3059\u3002",source:"@site/docs/openblocks/fw4/data_handling_ref/pd_agent.md",slug:"/openblocks/fw4/data_handling_ref/pd_agent",permalink:"/docs/openblocks/fw4/data_handling_ref/pd_agent",version:"current",sidebar_label:"PD Agent",sidebar:"sidebar",previous:{title:"PD Broker",permalink:"/docs/openblocks/fw4/data_handling_ref/pd_broker"},next:{title:"PD Handler BLE",permalink:"/docs/openblocks/fw4/data_handling_ref/ble"}},i=[{value:'<span id="path">\u30c7\u30d5\u30a9\u30eb\u30c8\u30d1\u30b9</span>',id:"\u30c7\u30d5\u30a9\u30eb\u30c8\u30d1\u30b9",children:[]},{value:'<span id="conf">\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306e\u66f8\u5f0f</span>',id:"\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306e\u66f8\u5f0f",children:[{value:'<span id="syntax">\u69cb\u6587</span>',id:"\u69cb\u6587",children:[]},{value:'<span id="agents_obj">agents \u30aa\u30d6\u30b8\u30a7\u30af\u30c8</span>',id:"agents-\u30aa\u30d6\u30b8\u30a7\u30af\u30c8",children:[]},{value:'<span id="channels_obj">channels \u30aa\u30d6\u30b8\u30a7\u30af\u30c8</span>',id:"channels-\u30aa\u30d6\u30b8\u30a7\u30af\u30c8",children:[]},{value:'<span id="env">\u5b9f\u884c\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306b\u7d99\u627f\u3055\u308c\u308b\u74b0\u5883\u5909\u6570</span>',id:"\u5b9f\u884c\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306b\u7d99\u627f\u3055\u308c\u308b\u74b0\u5883\u5909\u6570",children:[]},{value:'<span id="dlm">Dynamic Link \u30e2\u30b8\u30e5\u30fc\u30eb</span>',id:"dynamic-link-\u30e2\u30b8\u30e5\u30fc\u30eb",children:[]},{value:'<span id="lua">Lua \u8a00\u8a9e\u30b9\u30af\u30ea\u30d7\u30c8</span>',id:"lua-\u8a00\u8a9e\u30b9\u30af\u30ea\u30d7\u30c8",children:[]},{value:'<span id="reply">\u5fdc\u7b54\u30e1\u30c3\u30bb\u30fc\u30b8</span>',id:"\u5fdc\u7b54\u30e1\u30c3\u30bb\u30fc\u30b8",children:[]}]}],o={rightToc:i};function d(e){var n=e.components,t=Object(r.a)(e,["components"]);return Object(l.b)("wrapper",Object(a.a)({},o,t,{components:n,mdxType:"MDXLayout"}),Object(l.b)("h2",{id:"\u30c7\u30d5\u30a9\u30eb\u30c8\u30d1\u30b9"},Object(l.b)("span",{id:"path"},"\u30c7\u30d5\u30a9\u30eb\u30c8\u30d1\u30b9")),Object(l.b)("p",null,"PD agent \u306b\u95a2\u9023\u3059\u308b\u30d5\u30a1\u30a4\u30eb\u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u30d1\u30b9\u306f\u6b21\u306e\u901a\u308a\u3067\u3059\u3002"),Object(l.b)("blockquote",null,Object(l.b)("p",{parentName:"blockquote"},"PD agent\u306b\u95a2\u9023\u3059\u308b\u30d5\u30a1\u30a4\u30eb\u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u30d1\u30b9")),Object(l.b)("table",null,Object(l.b)("thead",{parentName:"table"},Object(l.b)("tr",{parentName:"thead"},Object(l.b)("th",Object(a.a)({parentName:"tr"},{align:null}),"\u30d1\u30b9\u540d"),Object(l.b)("th",Object(a.a)({parentName:"tr"},{align:null}),"\u8aac\u660e"))),Object(l.b)("tbody",{parentName:"table"},Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"/usr/sbin/pd_agent"),Object(l.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"\u5e38\u99d0\u5b9f\u884c\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\uff08\u30c7\u30fc\u30e2\u30f3\uff09")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"/lib/systemd/system/pd_agent.service"),Object(l.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"Systemd Service \u30d5\u30a1\u30a4\u30eb")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"/etc/init.d/pd_agent"),Object(l.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"RC \u30d5\u30a1\u30a4\u30eb")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"/var/webui/config/pd_agent.conf"),Object(l.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"/var/run/pd_agent.pid"),Object(l.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"PID \u30d5\u30a1\u30a4\u30eb")))),Object(l.b)("h2",{id:"\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306e\u66f8\u5f0f"},Object(l.b)("span",{id:"conf"},"\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306e\u66f8\u5f0f")),Object(l.b)("h3",{id:"\u69cb\u6587"},Object(l.b)("span",{id:"syntax"},"\u69cb\u6587")),Object(l.b)("pre",null,Object(l.b)("code",Object(a.a)({parentName:"pre"},{className:"language-json:pd_agent.conf"}),'{\n    "agents": [\n        {\n            "enable": <bool\u5024>,\n            "localname:\u201d<\u30c7\u30d0\u30a4\u30b9\u756a\u53f7>",\n            "bind\u201d: "<\u53d7\u4fe1\u30bd\u30b1\u30c3\u30c8\u540d>",\n            "push_to\u201d: "<\u9001\u4fe1\u5148\u30bd\u30b1\u30c3\u30c8\u540d>",\n            "buffer_size": <\u30d0\u30c3\u30d5\u30a1\u30b5\u30a4\u30ba>,\n            "channels\u201d:[\n                {\n                    <channels\u30aa\u30d6\u30b8\u30a7\u30af\u30c8>\n                },\n                {\n                    <channels\u30aa\u30d6\u30b8\u30a7\u30af\u30c8>\n                }\n            ]\n        },\n        {\n            "enable": <bool\u5024>,\n            "localname:"<\u30c7\u30d0\u30a4\u30b9\u756a\u53f7>",\n            "bind\u201d: "<\u53d7\u4fe1\u30bd\u30b1\u30c3\u30c8\u540d>",\n            "push_to\u201d: "<\u9001\u4fe1\u5148\u30bd\u30b1\u30c3\u30c8\u540d>",\n            "buffer_size": <\u30d0\u30c3\u30d5\u30a1\u30b5\u30a4\u30ba>,\n            "channels\u201d:[\n                {\n                    <channels\u30aa\u30d6\u30b8\u30a7\u30af\u30c8>\n                }\n            ]\n        }\n    ]\n}\n')),Object(l.b)("h3",{id:"agents-\u30aa\u30d6\u30b8\u30a7\u30af\u30c8"},Object(l.b)("span",{id:"agents_obj"},"agents \u30aa\u30d6\u30b8\u30a7\u30af\u30c8")),Object(l.b)("blockquote",null,Object(l.b)("p",{parentName:"blockquote"},"agents \u30aa\u30d6\u30b8\u30a7\u30af\u30c8")),Object(l.b)("table",null,Object(l.b)("thead",{parentName:"table"},Object(l.b)("tr",{parentName:"thead"},Object(l.b)("th",Object(a.a)({parentName:"tr"},{align:null}),"\u30ad\u30fc"),Object(l.b)("th",Object(a.a)({parentName:"tr"},{align:null}),"\u30c7\u30fc\u30bf\u578b"),Object(l.b)("th",Object(a.a)({parentName:"tr"},{align:null}),"\u8aac\u660e"))),Object(l.b)("tbody",{parentName:"table"},Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"enable"),Object(l.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"\u8ad6\u7406\u5024"),Object(l.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"\u30c7\u30d5\u30a9\u30eb\u30c8\u5024\u306f false.")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"localname"),Object(l.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"\u6587\u5b57\u5217"),Object(l.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"\u30c7\u30d0\u30a4\u30b9\u306e\u30ed\u30fc\u30ab\u30eb\u540d(\u30c7\u30d0\u30a4\u30b9\u756a\u53f7). (32byte)")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"bind"),Object(l.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"\u6587\u5b57\u5217"),Object(l.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"\u5236\u5fa1\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u53d7\u3051\u53d6\u308b\u30bd\u30b1\u30c3\u30c8\u540d. \u6587\u5b57\u5217\u306e\u5148\u982d\u304c '@' \u306e\u5834\u5408\u306f abstract\u3000namespace \u3068\u89e3\u91c8\u3059\u308b. \u7a7a\u306e\u5834\u5408\u306f\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u5024 '@/pd_handler/","<","localname",">",".sock' \u304c\u8a2d\u5b9a\u3055\u308c\u308b. (MAXPATHLEN)")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"push_to"),Object(l.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"\u6587\u5b57\u5217"),Object(l.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"\u5fdc\u7b54\u30e1\u30c3\u30bb\u30fc\u30b8\u306e\u9001\u308a\u5148\u30bd\u30b1\u30c3\u30c8\u540d. \u6587\u5b57\u5217\u306e\u5148\u982d\u304c '@' \u306e\u5834\u5408\u306f abstract\u3000namespace \u3068\u89e3\u91c8\u3059\u308b. \u7a7a\u306e\u5834\u5408\u306f\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u5024 '@/pd_repeater/","<","localname",">",".sock' \u304c\u8a2d\u5b9a\u3055\u308c\u308b. (MAXPATHLEN)")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"buffer_size"),Object(l.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"\u6574\u6570\u5024"),Object(l.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"\u30c7\u30fc\u30bf\u306e\u30d0\u30c3\u30d5\u30a1\u30b5\u30a4\u30ba(byte). \u30c7\u30d5\u30a9\u30eb\u30c8\u5024\u306f 4096.")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"channels"),Object(l.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"JSON\u914d\u5217"),Object(l.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"channels \u30aa\u30d6\u30b8\u30a7\u30af\u30c8. \u6700\u592732 \u500b\u307e\u3067\u8a2d\u5b9a\u53ef\u80fd.")))),Object(l.b)("h3",{id:"channels-\u30aa\u30d6\u30b8\u30a7\u30af\u30c8"},Object(l.b)("span",{id:"channels_obj"},"channels \u30aa\u30d6\u30b8\u30a7\u30af\u30c8")),Object(l.b)("blockquote",null,Object(l.b)("p",{parentName:"blockquote"},"channels \u30aa\u30d6\u30b8\u30a7\u30af\u30c8")),Object(l.b)("table",null,Object(l.b)("thead",{parentName:"table"},Object(l.b)("tr",{parentName:"thead"},Object(l.b)("th",Object(a.a)({parentName:"tr"},{align:null}),"\u30ad\u30fc"),Object(l.b)("th",Object(a.a)({parentName:"tr"},{align:null}),"\u30c7\u30fc\u30bf\u578b"),Object(l.b)("th",Object(a.a)({parentName:"tr"},{align:null}),"\u8aac\u660e"))),Object(l.b)("tbody",{parentName:"table"},Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"name"),Object(l.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"\u6587\u5b57\u5217"),Object(l.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"\u30c1\u30e3\u30f3\u30cd\u30eb\u306e\u540d\u79f0. (32byte)")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"reply"),Object(l.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"\u8ad6\u7406\u5024"),Object(l.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"'push to' \u30ad\u30fc\u306b\u8a2d\u5b9a\u3055\u308c\u308b\u30bd\u30b1\u30c3\u30c8\u306b\u5fdc\u7b54\u3092\u8fd4\u3059\u304b\u5426\u304b\u306e\u8a2d\u5b9a. \u30c7\u30d5\u30a9\u30eb\u30c8\u5024\u306f true.")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"index"),Object(l.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"\u6587\u5b57\u5217"),Object(l.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"'exec' \u30ad\u30fc\u306b\u6307\u5b9a\u3055\u308c\u308b\u5b9f\u884c\u30aa\u30d6\u30a7\u30af\u30c8\u306e\u8d77\u52d5\u6761\u4ef6\u3068\u3057\u3066\u8a55\u4fa1\u3055\u308c\u308b\u3001JSON\u6587\u5b57\u5217\u30c7\u30fc\u30bf\u306e\u30ad\u30fc. (32byte)")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"value"),Object(l.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"\u6587\u5b57\u5217"),Object(l.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"'exec' \u30ad\u30fc\u306b\u6307\u5b9a\u3055\u308c\u308b\u5b9f\u884c\u30aa\u30d6\u30a7\u30af\u30c8\u306e\u8d77\u52d5\u6761\u4ef6\u3068\u3057\u3066\u8a55\u4fa1\u3055\u308c\u308b\u3001JSON \u6587\u5b57\u5217\u30c7\u30fc\u30bf\u306e\u5024. (32byte)")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"exec"),Object(l.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"\u6587\u5b57\u5217"),Object(l.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"'index' \u30ad\u30fc\u306b\u8a2d\u5b9a\u3055\u308c\u308b\u30ad\u30fc\u3068'value' \u30ad\u30fc\u306b\u8a2d\u5b9a\u3055\u308c\u308b\u305d\u306e\u5024\u304c\u3001JSON\u6587\u5b57\u5217\u30c7\u30fc\u30bf\u306b\u542b\u307e\u308c\u3066\u3044\u308b\u5834\u5408\u306b\u5b9f\u884c\u3055\u308c\u308b\u5b9f\u884c\u30aa\u30d6\u30a7\u30af\u30c8\u3082\u3057\u304f\u306f Dynamic Link \u30e2\u30b8\u30e5\u30fc\u30eb\u53c8\u306f Lua \u8a00\u8a9e\u30b9\u30af\u30ea\u30d7\u30c8\u306e\u30d1\u30b9\u540d\u306e\u30d1\u30b9\u540d. \u30d5\u30a1\u30a4\u30eb\u8a18\u8ff0\u5b50\u304c .so \u306e\u5834\u5408\u306f Dinamic Link \u30e2\u30b8\u30e5\u30fc\u30eb\u3001.lua \u306e\u5834\u5408\u306f Lua\u8a00\u8a9e\u30b9\u30af\u30ea\u30d7\u30c8\u3001\u305d\u308c\u4ee5\u5916\u306e\u5834\u5408\u306f\u5b9f\u884c\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3068\u898b\u306a\u3055\u308c\u308b. (MAXPATHLEN)")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"args"),Object(l.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"\u6587\u5b57\u5217"),Object(l.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"'exec' \u30ad\u30fc\u306b\u8a2d\u5b9a\u3055\u308c\u308b\u5b9f\u884c\u30aa\u30d6\u30a7\u30af\u30c8\u306b\u4e0e\u3048\u308b\u5f15\u6570. 'exec' \u306b\u6307\u5b9a\u3055\u308c\u308b\u30d1\u30b9\u540d\u304c Dynamic Link \u30e2\u30b8\u30e5\u30fc\u30eb\u307e\u305f\u306f Lua\u8a00\u8a9e\u30b9\u30af\u30ea\u30d7\u30c8\u306e\u5834\u5408\u306f\u7121\u8996\u3055\u308c\u307e\u3059. (1024byte)")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"lua_func"),Object(l.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"\u6587\u5b57\u5217"),Object(l.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"\u5b9f\u884c\u3055\u308c\u308b Lua \u8a00\u8a9e\u30b9\u30af\u30ea\u30d7\u30c8\u5185\u306e\u95a2\u6570\u540d. (64bye)")))),Object(l.b)("h3",{id:"\u5b9f\u884c\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306b\u7d99\u627f\u3055\u308c\u308b\u74b0\u5883\u5909\u6570"},Object(l.b)("span",{id:"env"},"\u5b9f\u884c\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306b\u7d99\u627f\u3055\u308c\u308b\u74b0\u5883\u5909\u6570")),Object(l.b)("p",null,"\u53d7\u4fe1\u30c7\u30fc\u30bf\u306e JSON \u6587\u5b57\u5217\u306e\u5185\u3001\u8d77\u52d5\u6761\u4ef6\u306e\u8a55\u4fa1\u306b\u7528\u3044\u305f\u30ad\u30fc\u3068\u5024\u3092\u542b\u3081\u3001\u5024\u304c\u6587\u5b57\u5217\u304b\u6570\u5024\u306e\u5834\u5408\u306f\u3001\u3053\u308c\u3092\u74b0\u5883\u5909\u6570\u306b\u8a2d\u5b9a\u3057\u5b9f\u884c\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306b\u7d99\u627f\u3057\u307e\u3059\u3002",Object(l.b)("br",{parentName:"p"}),"\n","\u307e\u305f\u3001 ",Object(l.b)("a",Object(a.a)({parentName:"p"},{href:"/docs/openblocks/fw4/data_handling_ref/pd_repeater#down_stream"}),"\u4e0b\u6d41\u65b9\u5411\u30e1\u30c3\u30bb\u30fc\u30b8"),"\u306b\u8a18\u8f09\u3055\u308c\u308b Cloud ID\u3001\u53d7\u4fe1\u30c7\u30fc\u30bf(\u30da\u30a4\u30ed\u30fc\u30c9) \u306e MD5 \u30cf\u30c3\u30b7\u30e5\u5024\u3001\u53d7\u4fe1\u30c7\u30fc\u30bf\u306e\u30d8\u30c3\u30c0\u60c5\u5831\u3068 PD Agent \u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u30c7\u30d0\u30a4\u30b9\u306e\u30ed\u30fc\u30ab\u30eb\u540d\u3082\u5408\u308f\u305b\u3066\u74b0\u5883\u5909\u6570\u306b\u7d99\u627f\u3057\u307e\u3059\u3002  "),Object(l.b)("blockquote",null,Object(l.b)("p",{parentName:"blockquote"},"\u5b9f\u884c\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306b\u74b0\u5883\u5909\u6570\u3068\u3057\u3066\u7d99\u627f\u3055\u308c\u308b\u30d1\u30e9\u30e1\u30fc\u30bf")),Object(l.b)("table",null,Object(l.b)("thead",{parentName:"table"},Object(l.b)("tr",{parentName:"thead"},Object(l.b)("th",Object(a.a)({parentName:"tr"},{align:null}),"\u74b0\u5883\u5909\u6570\u540d"),Object(l.b)("th",Object(a.a)({parentName:"tr"},{align:null}),"\u30c7\u30fc\u30bf\u578b"),Object(l.b)("th",Object(a.a)({parentName:"tr"},{align:null}),"\u8aac\u660e"))),Object(l.b)("tbody",{parentName:"table"},Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"request_cloud_id"),Object(l.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"\u6574\u6570\u5024"),Object(l.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"PD Repeater \u304c\u4fbf\u5b9c\u4e0a\u5272\u308a\u5f53\u3066\u3066\u3044\u308b\u756a\u53f7")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"request_sub_id"),Object(l.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"\u6574\u6570\u5024"),Object(l.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"\u540c\u4e00\u30af\u30e9\u30a6\u30c9\u306e\u8907\u6570\u30b5\u30fc\u30d0\u3092\u5229\u7528\u3057\u3066\u3044\u308b\u5834\u5408\u306e\u8b58\u5225\u5b50")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"request_header"),Object(l.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"\u6587\u5b57\u5217"),Object(l.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"PD Repeater \u304b\u3089\u6e21\u3055\u308c\u308b\u53d7\u4fe1\u30c7\u30fc\u30bf\u306e\u30d8\u30c3\u30c0\u60c5\u5831")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"request_payload"),Object(l.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"\u6587\u5b57\u5217"),Object(l.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"PD Repeater \u304b\u3089\u6e21\u3055\u308c\u308b\u53d7\u4fe1\u30c7\u30fc\u30bf(\u30da\u30a4\u30ed\u30fc\u30c9)")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"request_md5"),Object(l.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"\u6587\u5b57\u5217"),Object(l.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"PD Repeater \u304b\u3089\u6e21\u3055\u308c\u308b\u53d7\u4fe1\u30c7\u30fc\u30bf(\u30da\u30a4\u30ed\u30fc\u30c9) \u306e MD5 \u30cf\u30c3\u30b7\u30e5\u5024")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"agent_localname"),Object(l.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"\u6587\u5b57\u5217"),Object(l.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"'localname' \u30ad\u30fc\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u30c7\u30d0\u30a4\u30b9\u306e\u30ed\u30fc\u30ab\u30eb\u540d(\u30c7\u30d0\u30a4\u30b9\u756a\u53f7).")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"agent_bind"),Object(l.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"\u6587\u5b57\u5217"),Object(l.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"'bind' \u30ad\u30fc\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u30c7\u30fc\u30bf\u3092\u53d7\u3051\u53d6\u3063\u305f\u30bd\u30b1\u30c3\u30c8\u540d.")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"agent_push_to"),Object(l.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"\u6587\u5b57\u5217"),Object(l.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"'push_to' \u30ad\u30fc\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u5fdc\u7b54\u5148\u30bd\u30b1\u30c3\u30c8\u540d.")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"agent_buffer_size"),Object(l.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"\u6574\u6570\u5024"),Object(l.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"'buffer_size' \u30ad\u30fc\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u30c7\u30fc\u30bf\u306e\u30d0\u30c3\u30d5\u30a1\u30b5\u30a4\u30ba.(byte)")))),Object(l.b)("h3",{id:"dynamic-link-\u30e2\u30b8\u30e5\u30fc\u30eb"},Object(l.b)("span",{id:"dlm"},"Dynamic Link \u30e2\u30b8\u30e5\u30fc\u30eb")),Object(l.b)("p",null,"Dynamic Link \u30e2\u30b8\u30e5\u30fc\u30eb\u306e\u30b5\u30f3\u30d7\u30eb\u30b3\u30fc\u30c9\u3092\u793a\u3057\u307e\u3059\u3002",Object(l.b)("br",{parentName:"p"}),"\n","Dynamic Link \u30e2\u30b8\u30e5\u30fc\u30eb\u306f\u3001dlopen()\u306b\u3088\u3063\u3066 PD Agent \u306b\u53d6\u308a\u8fbc\u307e\u308c\u307e\u3059\u3002dl_exec() \u304c\u3001execv() \u306b\u3088\u3063\u3066\u5b9f\u884c\u3055\u308c\u308b\u5916\u90e8\u306e\u5b9f\u884c\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u4ee3\u308f\u308a\u306b\u547c\u3073\u51fa\u3055\u308c\u308b\u95a2\u6570\u3067\u3059\u3002",Object(l.b)("br",{parentName:"p"}),"\n","dl_exec() \u306e\u5f15\u6570\u306b\u306f\u3001\u5b9f\u884c\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u5b9f\u884c\u3059\u308b\u969b\u306b\u74b0\u5883\u5909\u6570\u3068\u3057\u3066\u7d99\u627f\u3055\u308c\u308b\u5168\u3066\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u542b\u307f\u307e\u3059\u3002\u3000JSON\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u30dd\u30a4\u30f3\u30bf result \u304c NULL \u306e\u5834\u5408\u3001\u5fdc\u7b54\u30e1\u30c3\u30bb\u30fc\u30b8\u306e 'result' \u30ad\u30fc\u306e\u5024\u306f 'done'\u3068\u306a\u308a\u307e\u3059\u3002\u3000dl_init() \u306f PD Agent \u306e\u8d77\u52d5\u6642\u306b\u3001dl_fini() \u306f\u505c\u6b62\u6642\u306b\u4e00\u5ea6\u3060\u3051\u547c\u3070\u308c\u308b\u95a2\u6570\u3067\u3042\u308a\u3001\u5fc5\u8981\u304c\u7121\u3051\u308c\u3070\u30b5\u30f3\u30d7\u30eb\u30b3\u30fc\u30c9\u306e\u307e\u307e\u3068\u3057\u3066\u4e0b\u3055\u3044\u3002",Object(l.b)("br",{parentName:"p"}),"\n","\u672c\u30b5\u30f3\u30d7\u30eb\u30b3\u30fc\u30c9\u306f\u3001/usr/share/pdhms/agent/dl_module.c \u3068\u3057\u3066\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u307e\u3059\u3002"),Object(l.b)("pre",null,Object(l.b)("code",Object(a.a)({parentName:"pre"},{className:"language-c:dl_module.c"}),'/*\n *  Copyright (c) 2018 - 2020\n *       Plat\'Home CO., LTD. <support@plathome.co.jp>. All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions\n * are met:\n * 1. Redistributions of source code must retain the above copyright\n *    notice, this list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright\n *    notice, this list of conditions and the following disclaimer in the\n *    documentation and/or other materials provided with the distribution.\n * 3. Neither the name of the Plat\'Home CO., LTD. nor the names of\n *    its contributors may be used to endorse or promote products derived\n *    from this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE AUTHOR ``AS IS\'\' AND ANY EXPRESS OR\n * IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n * ARE DISCLAIMED.  IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY DIRECT,\n * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)\n * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT\n * LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY\n * OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF\n * SUCH DAMAGE.\n */\n\n#include <stdio.h>\n#include <stdlib.h>\n#include <string.h>\n#include <syslog.h>\n#include <time.h>\n#include <time.h>\n#include <unistd.h>\n#include <errno.h>\n#include <sys/param.h>\n#include <sys/types.h>\n#include <sys/socket.h>\n#include <sys/un.h>\n#include <jansson.h>\n#ifdef __linux__\n#include <lua5.3/lua.h>\n#else\n#include <lua.h>\n#endif\n\n#define N_CHANNEL   32\n\nstruct channel_t {\n    unsigned char   reply;              /* Enable replay or not.                */\n    unsigned char   objtype;            /* 1 for dynamic link module.           */\n    char            name[32];           /* Name of chaanel                      */\n    char            index[32];          /* Index of JSON string to be driven.   */ \n    char            value[32];          /* Value of JSON string to be driven.   */ \n    char            exec[MAXPATHLEN];   /* Pathname of dynamic link module.     */ \n    char            lua_func[64];       /* Not use in dynamic link module.      */ \n    int             argc;               /* Not use in dynamic link module.      */\n    char            *argv[16];          /* Not use in dynamic link module.      */\n    void            *dl_handle;         /* Handle on the global symbol object.  */\n    lua_State       *lua_state;         /* Not use in dynamic link module.      */\n};\n\nstruct agent_t {\n    int             num_ch;             /* Total number of channels in device.  */\n    unsigned char   enable; \n    char            localname[32];      /* Local Device name (number).          */\n    char            bind[MAXPATHLEN];   /* Pathname of UNIX domain socket to listen. */\n    size_t          buffer_size;        /* Buffer size of UNIX domain socket.   */\n    char            push_to[MAXPATHLEN]; /* Pathname of UNIX domain socket to send. */\n    struct channel_t *ch[N_CHANNEL];    /* Pointer to each channel.             */\n    char            *buf;               /* message buffer for down stream.      */\n}; \n\n// Your own functions\n\n/*\n    Your own initialize function : void dl_init()\n      It is called only once at startup.\n      Return value : none. \n*/\nvoid dl_init()\n{\n    return;\n}\n\n/*\n    Your own finalize function : void dl_fini()\n      It is called only once at termination.\n      Return value : none. \n*/\nvoid dl_fini()\n{\n    return;\n}\n\n/*\n    Your own exec function      : int dl_exec()\n        JSON *result            : Reply value for \'result\' key of JSON.\n        struct agent_t *agent   : See above structure declaration.\n        int ch_number           : Channel number where Index and Value match.\n        json_t *json_obj        : It stores all indexes and values contained in the payload of\n                                  the downstream message as Jansson C objects.\n        unsigned char cloud_id  : Cloud Id.\n        unsigned char sub_id    : Sub Cloud Id.\n                                  These are the indications from which cloud they have been sent.\n        char *rcv_header        : Contain the header information of the down stream message.\n        char *rcv_payload       : Contain the paylod of the down stream message.\n        char *hash              : Hash value (MD5) of paylod of the down stream message.\n        Return value            : must be 0 for normal, -1 for error. \n*/\nint dl_exec(json_t *result, struct agent_t *agent, int ch_number, json_t *json_obj,\n    unsigned char cloud_id, unsigned char sub_id,\n    char *rcv_header, char *rcv_payload, char *hash)\n{\n    int rc;\n    char *tx_payload;\n    struct channel_t *ch;\n\n    ch = (struct channel_t *)agent->ch[ch_number];\n\n    pid_t pid;\n\n//  The method to obtain Index and value from json_obj is shown below.\n/*\n    json_t *val;\n    const char *key;\n    val = json_object();\n    json_object_foreach(json_obj, key, val) {\n        if(json_is_string(val)) {\n            printf("%s", json_string_value(val));\n        }\n        else if(json_is_integer(val)) {\n            printf("%ld", json_integer_value(val));\n        }\n        else if(json_is_real(val)) {\n            printf("%lf", json_real_value(val));\n        }\n    }\n*/\n\n//  Write your own process here.\n\n\n//  Set any value for \'result\' key\n\n    json_object_set(result, "done", json_true());\n    json_object_set(result, "localname", json_string(agent->localname));\n\n    return(0);\n}\n')),Object(l.b)("h3",{id:"lua-\u8a00\u8a9e\u30b9\u30af\u30ea\u30d7\u30c8"},Object(l.b)("span",{id:"lua"},"Lua \u8a00\u8a9e\u30b9\u30af\u30ea\u30d7\u30c8")),Object(l.b)("p",null,"Lua \u8a00\u8a9e\u30b9\u30af\u30ea\u30d7\u30c8\u306e\u30b5\u30f3\u30d7\u30eb\u30b3\u30fc\u30c9\u3092\u793a\u3057\u307e\u3059\u3002",Object(l.b)("br",{parentName:"p"}),"\n","Lua \u8a00\u8a9e\u30b9\u30af\u30ea\u30d7\u30c8\u306f\u3001luaL_dofile()\u306b\u3088\u3063\u3066 PD Agent \u306b\u53d6\u308a\u8fbc\u307e\u308c\u3001\u540c\u30b9\u30af\u30ea\u30d7\u30c8\u306b\u542b\u307e\u308c\u308b\u95a2\u6570\u306e\u5185\u3001'lua_func' \u30ad\u30fc\u306b\u6307\u5b9a\u3055\u308c\u305f\u95a2\u6570\u304c\u5b9f\u884c\u3055\u308c\u307e\u3059\u3002",Object(l.b)("br",{parentName:"p"}),"\n","\u6307\u5b9a\u3055\u308c\u305f\u95a2\u6570\u306b\u306f\u3001\u5b9f\u884c\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u5b9f\u884c\u3059\u308b\u5834\u5408\u306b\u74b0\u5883\u5909\u6570\u3068\u3057\u3066\u7d99\u627f\u3055\u308c\u308b\u5168\u3066\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u304c\u7d99\u627f(push)\u3055\u308c\u307e\u3059\u3002",Object(l.b)("br",{parentName:"p"}),"\n","\u95a2\u6570\u306e\u623b\u308a\u5024 Stack1 \u306f\u3001\u6b63\u5e38\u7d42\u4e86\u3067\u3042\u308c\u3070 0, \u7570\u5e38\u7d42\u4e86\u3067\u3042\u308c\u3070 -1 \u3092\u8fd4\u3057\u3066\u4e0b\u3055\u3044\u3002",Object(l.b)("br",{parentName:"p"}),"\n","\u623b\u308a\u5024\u306e Stack2 \u306f\u3001\u5fdc\u7b54\u30e1\u30c3\u30bb\u30fc\u30b8\u306e 'result'\u30ad\u30fc\u306b\u4e0e\u3048\u3089\u308c\u308b JSON \u6587\u5b57\u5217\u3092\u8fd4\u3057\u3066\u4e0b\u3055\u3044\u3002\u3000\u3000\n\u672c\u30b5\u30f3\u30d7\u30eb\u30b3\u30fc\u30c9\u306f\u3001/usr/share/pdhms/agent/example.lua \u3068\u3057\u3066\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u307e\u3059\u3002"),Object(l.b)("pre",null,Object(l.b)("code",Object(a.a)({parentName:"pre"},{className:"language-lua:example.lua"}),'--\n--  Copyright (c) 2018, 2019\n--       Plat\'Home CO., LTD. <support@plathome.co.jp>. All rights reserved.\n--\n-- Redistribution and use in source and binary forms, with or without\n-- modification, are permitted provided that the following conditions\n-- are met:\n-- 1. Redistributions of source code must retain the above copyright\n--    notice, this list of conditions and the following disclaimer.\n-- 2. Redistributions in binary form must reproduce the above copyright\n--    notice, this list of conditions and the following disclaimer in the\n--    documentation and/or other materials provided with the distribution.\n-- 3. Neither the name of the Plat\'Home CO., LTD. nor the names of\n--    its contributors may be used to endorse or promote products derived\n--    from this software without specific prior written permission.\n--\n-- THIS SOFTWARE IS PROVIDED BY THE AUTHOR ``AS IS\'\' AND ANY EXPRESS OR\n-- IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n-- WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n-- ARE DISCLAIMED.  IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY DIRECT,\n-- INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n-- (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n-- SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)\n-- HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT\n-- LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY\n-- OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF\n-- SUCH DAMAGE.\n\n-- Argument for lua function\n--  string localname    : Local Device name (number).\n--  string bind         : Pathname of UNIX domain socket to listen.\n--  string push_to      : Pathname of UNIX domain socket to send.\n--  number buffer_size  : Buffer size of UNIX domain socket.\n--  number ch_number    : Channel number where Index and Value match.\n--  boolean reply       : Enable replay or not.\n--  string name         : Name of chaanel.\n--  string index        : Index of JSON string to be driven.\n--  string value        : Value of JSON string to be driven.\n--  number cloud_id     : Cloud Id.\n--  number sub_id       : Sub Cloud Id.\n--                        These are the indications from which cloud they have been sent.\n--  string rcv_header   : Contain the header information of the down stream message.\n--  string rcv_payload  : Contain the paylod of the down stream message.\n--  string hash         : Hash value (MD5) of paylod of the down stream message.\n\n-- Return value of lua function\n--  Stack 1 : must be 0 for normal, -1 for error, will be get by lua_tointeger().\n--  Stack 2 : any string for results, will be get by lua_tolstring().\n\nfunction my_lua_func1(localname, bind, push_to, buffer_size, ch_number, reply,\n    name, index, value, cloud_id, sub_id, rcv_header, rcv_payload, hash)\n\n    fp = io.open("/tmp/my_lua_func1.txt", "w")\n\n    s = string.format("localname : %s\\n", localname)\n    fp:write(s)\n\n    s = string.format("bind : %s\\n", bind)\n    fp:write(s)\n\n    s = string.format("push_to : %s\\n", push_to)\n    fp:write(s)\n\n    s = string.format("buffer_size : %d\\n", buffer_size)\n    fp:write(s)\n\n    s = string.format("ch_number : %d\\n", ch_number)\n    fp:write(s)\n\n    if (reply) then\n        _replay = "true"\n    else\n        _replay = "false"\n    end\n    s = string.format("reply : %s\\n", _reply)\n    fp:write(s)\n\n    s = string.format("name : %s\\n", name)\n    fp:write(s)\n\n    s = string.format("index : %s\\n", index)\n    fp:write(s)\n\n    s = string.format("value : %s\\n", value)\n    fp:write(s)\n\n    s = string.format("cloud_id : %d\\n", cloud_id)\n    fp:write(s)\n\n    s = string.format("sub_id : %d\\n", sub_id)\n    fp:write(s)\n\n    s = string.format("rcv_header : %s\\n", rcv_header)\n    fp:write(s)\n\n    s = string.format("rcv_payload : %s\\n", rcv_payload)\n    fp:write(s)\n\n    s = string.format("hash : %s\\n", hash)\n    fp:write(s)\n\n    fp:close()\n\n    -- reply message in "result" keys.\n    result = string.format("{\\"done\\": true, \\"localname\\":\\"%s\\"}", localname)\n\n    return 0, result\nend\n')),Object(l.b)("h3",{id:"\u5fdc\u7b54\u30e1\u30c3\u30bb\u30fc\u30b8"},Object(l.b)("span",{id:"reply"},"\u5fdc\u7b54\u30e1\u30c3\u30bb\u30fc\u30b8")),Object(l.b)("p",null,"'reply' \u30ad\u30fc\u304ctrue \u306e\u5834\u5408\u3001PD Agent \u306f'push to' \u306b\u8a2d\u5b9a\u3055\u308c\u308b\u30bd\u30b1\u30c3\u30c8\u306b\u5b9f\u884c\u30b9\u30c6\u30fc\u30bf\u30b9\u3092 JSON \u6587\u5b57\u5217\u3067\u8fd4\u3057\u307e\u3059\u3002"),Object(l.b)("p",null,"\u5b9f\u884c\u30b3\u30de\u30f3\u30c9\u3092\u8d77\u52d5\u3057\u305f :"),Object(l.b)("pre",null,Object(l.b)("code",Object(a.a)({parentName:"pre"},{}),'  {\n     "time": "timestamp", "reply_to": "md5", "result": "queuing",\n     "reason": "matched", "matched": {"key": "value"}\n  }\n')),Object(l.b)("p",null,"\u5b9f\u884c\u30b3\u30de\u30f3\u30c9\u306e\u5b9f\u884c\u306b\u5931\u6557\u3057\u305f :"),Object(l.b)("pre",null,Object(l.b)("code",Object(a.a)({parentName:"pre"},{}),' {\n    "time": "timestamp", "reply_to": "md5", "result": "faild",\n    "reason": "matched", "matched": {"key": "value"}\n }\n')),Object(l.b)("p",null,"\u5b9f\u884c\u30b3\u30de\u30f3\u30c9\u306e\u5b9f\u884c\u3092\u7d42\u4e86\u3057\u305f :"),Object(l.b)("pre",null,Object(l.b)("code",Object(a.a)({parentName:"pre"},{}),' {\n    "time": "timestamp", "reply_to": "md5", "result": "done",\n    "reason": "matched", "matched": {"key": "value"}\n }\n')),Object(l.b)("p",null,"\u4e00\u81f4\u3059\u308b\u30ad\u30fc\u3068\u5024\u304c\u5b58\u5728\u3057\u306a\u3044 :"),Object(l.b)("pre",null,Object(l.b)("code",Object(a.a)({parentName:"pre"},{}),' {\n    "time": "timestamp", "reply_to": "md5", "result": "not queuing",\n    "reason": "key and value not matched"\n }\n')),Object(l.b)("p",null,"\u5236\u5fa1\u30e1\u30c3\u30bb\u30fc\u30b8\u304cJSON\u6587\u5b57\u5217\u3067\u306a\u3044 :"),Object(l.b)("pre",null,Object(l.b)("code",Object(a.a)({parentName:"pre"},{}),' {\n    "time": "timestamp", "reply_to": "md5", "result": "not queuing",\n    "reason": "not JSON form"\n }\n')),Object(l.b)("p",null,"\u3053\u3053\u3067\u3001md5\u306f\u3001 ",Object(l.b)("a",Object(a.a)({parentName:"p"},{href:"/docs/openblocks/fw4/data_handling_ref/pd_repeater#down_stream"}),"\u4e0b\u6d41\u65b9\u5411\u30e1\u30c3\u30bb\u30fc\u30b8"),'\u306b\u8a18\u8f09\u3055\u308c\u308b\u5236\u5fa1\u30e1\u30c3\u30bb\u30fc\u30b8\u306e\u30cf\u30c3\u30b7\u30e5\u5024\u3001{"key": "value"} \u306f\u3001\u4e00\u81f4\u3057\u305f\u300c\u5224\u65ad\u30ad\u30fc\u300d\u3068\u300c\u51e6\u7406\u5224\u65ad\u5024\u300d\u3067\u3059\u3002',Object(l.b)("br",{parentName:"p"}),"\n","\u5b9f\u884c\u30b9\u30c6\u30fc\u30bf\u30b9\u306f\u3001\u5b9f\u884c\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3082\u3057\u304f\u306f\u30b7\u30a7\u30eb\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u547c\u3073\u51fa\u3059 execv() \u306e\u623b\u308a\u5024\u3067\u3042\u308a\u3001\u5b9f\u884c\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3082\u3057\u304f\u306f\u30b7\u30a7\u30eb\u30b9\u30af\u30ea\u30d7\u30c8\u306e\u51e6\u7406\u7d50\u679c\u3092\u793a\u3059\u3082\u306e\u3067\u306f\u3042\u308a\u307e\u305b\u3093\u3002\u3000\u51e6\u7406\u306e\u5b8c\u5168\u6027\u3092\u6c42\u3081\u308b\u306e\u3067\u3042\u308c\u3070\u5fdc\u7b54\u30e1\u30c3\u30bb\u30fc\u30b8\u306f\u5b9f\u884c\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3082\u3057\u304f\u306f\u30b7\u30a7\u30eb\u30b9\u30af\u30ea\u30d7\u30c8\u304b\u3089 agent_push_to \u74b0\u5883\u5909\u6570\u3067\u7d99\u627f\u3055\u308c\u308bUNIX\u30c9\u30e1\u30a4\u30f3\u30bd\u30b1\u30c3\u30c8\u306b\u8fd4\u3059\u3088\u3046\u306b\u3057\u3066\u4e0b\u3055\u3044\u3002"),Object(l.b)("p",null,"Dynamic Link \u30e2\u30b8\u30e5\u30fc\u30eb\u4f7f\u7528\u6642\u3067\u3001dl_exec() \u306e JSON \u6587\u5b57\u5217\u30dd\u30a4\u30f3\u30bf\u5f15\u6570 result \u304c NULL \u3067\u7121\u3044\u5834\u5408\u3001 \u5b9f\u884c\u7d42\u4e86\u6642\u306e 'result'\u30ad\u30fc\u306e\u5024\u306f JSON \u6587\u5b57\u5217\u30dd\u30a4\u30f3\u30bf\u5f15\u6570 result \u306e\u5024(JSON\u6587\u5b57\u5217)\u306b\u7f6e\u304d\u63db\u3048\u3089\u308c\u308b."),Object(l.b)("p",null,"Lua\u8a00\u8a9e\u30b9\u30af\u30ea\u30d7\u30c8\u4f7f\u7528\u6642\u3067\u3001\u623b\u308a\u5024 Stack2 \u304c NULL \u3067\u7121\u3044\u5834\u5408\u3001\u5b9f\u884c\u7d42\u4e86\u6642\u306e 'result'\u30ad\u30fc\u306e\u5024\u306f\u3001\u623b\u308a\u5024 Stack2 \u306e\u5024(JSON\u6587\u5b57\u5217)\u306b\u7f6e\u304d\u63db\u3048\u3089\u308c\u308b."))}d.isMDXComponent=!0},442:function(e,n,t){"use strict";t.d(n,"a",(function(){return s})),t.d(n,"b",(function(){return O}));var a=t(0),r=t.n(a);function l(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function b(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function c(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?b(Object(t),!0).forEach((function(n){l(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):b(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function i(e,n){if(null==e)return{};var t,a,r=function(e,n){if(null==e)return{};var t,a,r={},l=Object.keys(e);for(a=0;a<l.length;a++)t=l[a],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)t=l[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var o=r.a.createContext({}),d=function(e){var n=r.a.useContext(o),t=n;return e&&(t="function"==typeof e?e(n):c(c({},n),e)),t},s=function(e){var n=d(e.components);return r.a.createElement(o.Provider,{value:n},e.children)},u={inlineCode:"code",wrapper:function(e){var n=e.children;return r.a.createElement(r.a.Fragment,{},n)}},p=r.a.forwardRef((function(e,n){var t=e.components,a=e.mdxType,l=e.originalType,b=e.parentName,o=i(e,["components","mdxType","originalType","parentName"]),s=d(t),p=a,O=s["".concat(b,".").concat(p)]||s[p]||u[p]||l;return t?r.a.createElement(O,c(c({ref:n},o),{},{components:t})):r.a.createElement(O,c({ref:n},o))}));function O(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var l=t.length,b=new Array(l);b[0]=p;var c={};for(var i in n)hasOwnProperty.call(n,i)&&(c[i]=n[i]);c.originalType=e,c.mdxType="string"==typeof e?e:a,b[1]=c;for(var o=2;o<l;o++)b[o]=t[o];return r.a.createElement.apply(null,b)}return r.a.createElement.apply(null,t)}p.displayName="MDXCreateElement"}}]);